(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{85142:function(e,t,s){Promise.resolve().then(s.t.bind(s,38173,23)),Promise.resolve().then(s.bind(s,10912)),Promise.resolve().then(s.bind(s,61481)),Promise.resolve().then(s.bind(s,46505))},46505:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var a=s(57437),l=s(2265),i=s(25443),r=s(20610),o=s(19769),n=s(20864),d=s(44379),c=s(44757),u=s(74340),h=s(70671),p=s(14537),g=s(36962),m=s(14937),x=s(29565),f=s(47840),v=s(52823),j=s(89386),b=s(7950),_=s(65874),y=s(39343),k=s(79512),S=s(62737),I=s.n(S),C=s(30998),w=s(98053),z=s(84367),N=s(98978),O=s(9484),E=s(85222),P=s(86493),D=s(20408),Y=s(30530),T=s(1726);function V(e){let{isOpen:t,register:s,onClose:i}=e,[r,o]=l.useState("");return(0,a.jsxs)(z.u_,{size:"lg",isOpen:t,onClose:i,children:[(0,a.jsx)(N.Z,{}),(0,a.jsxs)(O.h,{children:[(0,a.jsx)(E.x,{children:"Set Feature Image"}),(0,a.jsx)(P.o,{}),(0,a.jsx)(D.f,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"my-4 text-xl font-semibold text-center",children:"From URL"}),(0,a.jsx)(d.I,{placeholder:"Input External Image URL",value:r,...s("feature_img"),onChange:e=>o(e.target.value)}),(0,a.jsx)(d.I,{placeholder:"Caption Foto",...s("post_images_title",{required:!0}),my:5}),r&&(0,a.jsx)(Y.E,{src:r,alt:"Selected",objectFit:"cover",boxSize:"200px",mx:"auto",mt:4})]})}),(0,a.jsx)(T.m,{textAlign:"center",children:(0,a.jsx)(_.z,{mx:"auto",colorScheme:"red",onClick:i,children:"Submit"})})]})]})}var F=s(16463),A=s(16829),M=s(22861),B=s.n(M),Z=s(46511),L=e=>{let{onSelectArticle:t,theme:s,isOpen:i,onClose:r}=e,[o,n]=l.useState([]),[d,c]=l.useState(!1),[u,h]=l.useState(""),[p,g]=l.useState(null),{data:m}=(0,C.useSession)(),x=async e=>{var t,s,a;c(!0);let l=await (0,w.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/articles/"),{page:1,limit:100,status:"publish",search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==m?void 0:null===(t=m.user)||void 0===t?void 0:t.access_token)});(null==l?void 0:l.status)==200&&n(null==l?void 0:null===(a=l.data)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.articles.map(e=>({label:e.post_title,value:e.post_title,post_slug:e.post_slug,featured_image:"https://cdn4.uzone.id//assets/uploads/UZONEINC/digilife/YouTube/christian-wiediger-unsplash-app-youtube.jpg/200"}))),c(!1)};return l.useEffect(()=>{let e=setTimeout(()=>{u&&x(u)},500);return()=>{clearTimeout(e)}},[u]),(0,a.jsxs)(z.u_,{size:"xl",isOpen:i,onClose:r,children:[(0,a.jsx)(N.Z,{}),(0,a.jsxs)(O.h,{children:[(0,a.jsx)(E.x,{children:"Baca Juga"}),(0,a.jsx)(P.o,{}),(0,a.jsx)(D.f,{children:(0,a.jsx)(Z.ZP,{styles:{control:e=>({...e,backgroundColor:"dark"===s?"#2D3748":"#fff",color:"dark"===s?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===s?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===s?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===s?"#4A5568":"#E2E8F0",color:"dark"===s?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===s?"#fff":"#000"})},options:o,isLoading:d,placeholder:"Search title...",onChange:e=>g(e),onInputChange:e=>{h(e)}})}),(0,a.jsx)(T.m,{children:(0,a.jsx)(_.z,{colorScheme:"blue",onClick:()=>{t(p),r()},children:"Select"})})]})]})};function X(e){let{theme:t,setValue:s}=e,[r,o]=l.useState(""),[n,d]=l.useState(!1),[c,u]=l.useState(null),{isOpen:h,onOpen:p,onClose:g}=(0,i.q)(),m=l.useRef(null),x=l.useMemo(()=>({events:{afterInit:e=>{m.current=e}},toolbarSticky:!0,toolbarStickyOffset:350,readonly:!1,height:800,theme:"dark"==t?"jodit_dark":"default",hidePoweredByJodit:!0,showCharsCounter:!0,showWordsCounter:!0,placeholder:"Start writing here...",aiAssistant:!1,buttons:["undo","redo","|","bold","italic","underline","strikethrough","|","left","center","right","justify","|","ul","ol","fontsize","indent","outdent","|","table","link","file","image","video","|","brush","source","preview","|"],extraButtons:[{name:"Baca Juga",exec:()=>{u(m.current.selection.save()),p()},tooltip:"Insert related article"}],disablePlugins:["about","add-new-line","ai-assistant","backspace","class-span","clipboard","copyformat","delete-command","dtd","enter","focus","font","format-block","hotkeys","hr","inline-popup","key-arrow-outside","limit","mobile","paste","paste-storage","powered-by-jodit","redo-undo","resize-cells","resize-handler","resizer","select","speech-recognize","spellcheck","symbols","xpath","wrap-nodes"],uploader:{url:"https://xdsoft.net/jodit/finder/?action=fileUpload",insertImageAsBase64URI:!0,imagesExtensions:[".jpg",".png",".gif"],data:{},format:"json",headers:{},prepareData:e=>e,isSuccess:e=>200===e.status,getMessage:e=>e.message,process:e=>e.files,defaultHandlerSuccess:(e,t,s,a)=>{s.getFiles().forEach(e=>{e.isImage()&&a(e)})}},filebrowser:{ajax:{url:"https://xdsoft.net/jodit/finder/"},height:580,pagination:{pageSize:20}}}),[t,p]);return l.useEffect(()=>{d(!0)},[]),(0,a.jsx)(a.Fragment,{children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L,{theme:t,isOpen:h,onClose:g,onSelectArticle:e=>{let t=m.current;if(t&&t.selection){let s='\n                <div class="p-0 px-5 pb-4 border-l-4 border-red-600 mb-4 bg-transparent clear-both">\n                    <h4 class="font-bold text-lg mb-4 text-red-600">Baca Juga :</h4>\n                    <div class="float-left">\n                        <a href="https://uzone.id/'.concat(e.post_slug,'" target="_blank">\n                            <img src="').concat(e.featured_image,'" alt="Images" title="').concat(e.label,'" class="w-30 h-20 object-cover rounded-lg">\n                        </a>\n                    </div>\n                    <div class="relative ml-40">\n                        <h5 class="font-bold text-base mt-5 underline">\n                            <a href="https://uzone.id/').concat(e.post_slug,'" target="_blank">').concat(e.label,'</a>\n                        </h5>\n                    </div>\n                    <div class="clear-both h-0"></div>\n                </div>\n                ');t.selection.restore(c),t.selection.insertHTML(s)}}}),(0,a.jsx)(B(),{value:r,config:x,onBlur:e=>{o(e),s("post_content",e,{shouldValidate:!0})}})]}):(0,a.jsx)(A.$,{size:"lg",colorScheme:"red"})})}function q(e){let{errors:t,control:s,theme:i,Controller:r,setValue:d,session:c}=e,[u,h]=l.useState([]),p={control:e=>({...e,backgroundColor:"dark"===i?"#2D3748":"#fff",color:"dark"===i?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===i?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===i?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===i?"#4A5568":"#E2E8F0",color:"dark"===i?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===i?"#fff":"#000"})},g=async e=>{var t,s,a;let l=await (0,w.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/tags/"),{page:1,limit:100,search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.access_token)});(null==l?void 0:l.status)==200&&h(null==l?void 0:null===(a=l.data)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.tags.map(e=>({label:e.name,value:e.id})))};return(0,a.jsxs)(o.NI,{isInvalid:!!t.post_tag,mb:4,children:[(0,a.jsx)(n.l,{children:"Tag"}),(0,a.jsx)(r,{name:"post_tag",control:s,defaultValue:[],render:e=>{let{field:t}=e;return(0,a.jsx)(Z.ZP,{...t,isMulti:!0,styles:p,options:u,placeholder:"Select tags...",onChange:e=>{d("post_tag",e)},onInputChange:e=>{e&&g(e)},value:t.value})}})]})}function H(){var e,t,s,S;let{data:z}=(0,C.useSession)(),{theme:N}=(0,k.F)(),{isOpen:O,onOpen:E,onClose:P}=(0,i.q)(),[D,Y]=l.useState([]),[T,A]=l.useState(!1),M=(0,F.useRouter)(),{register:B,handleSubmit:Z,formState:{errors:L},setValue:H,control:J}=(0,y.cI)(),U=(0,y.qo)({control:J,name:"post_title"}),R=(0,r.p)(),G=async e=>{var t,s;A(!0),e.post_date=I()().format("YYYY-MM-DD HH:mm:ss"),e.post_publish_date=I()().format("YYYY-MM-DD HH:mm:ss"),e.post_original_date=I()().format("YYYY-MM-DD HH:mm:ss"),e.post_status=[e.post_status],e.post_author=z.user.username,e.post_tag=e.post_tag.map(e=>e.label),e.is_premium=0,e.partner_id=1,e.post_video_url="",e.post_gallery="",e.post_modified="",e.feat_img_size={small:{x:"string",y:"string"},medium:{x:"string",y:"string"},full:{x:"string",y:"string"}},e.post_publisher=[""],e.post_editor=0,e.post_source=0,e.post_canonical_link="",e.is_ghost=0,e.post_enclosure_link="",e.post_title_masking="";let a=await (0,w.Z)("POST","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/articles/"),e,{accept:"application/json",Authorization:"Bearer ".concat(null==z?void 0:null===(t=z.user)||void 0===t?void 0:t.access_token)});(null==a?void 0:a.status)==201?(A(!1),R({title:"Success",description:"Data has been saved",status:"success",duration:6e3,isClosable:!0}),M.push("/dashboard/post/list")):(A(!1),R({title:"Error",description:null==a?void 0:null===(s=a.data)||void 0===s?void 0:s.message,status:"error",duration:6e3,isClosable:!0}))};return l.useEffect(()=>{U&&H("post_slug",U.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""))},[U,H]),l.useEffect(()=>{let e=async()=>{var e,t;let s=await (0,w.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/article-categories/"),{page:1,limit:100},{accept:"application/json",Authorization:"Bearer ".concat(null==z?void 0:null===(e=z.user)||void 0===e?void 0:e.access_token)});(null==s?void 0:s.status)==200&&Y(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data)};z&&e()},[z]),(0,a.jsxs)("div",{className:"px-4 pt-6",children:[(0,a.jsx)(V,{register:B,isOpen:O,onClose:P}),(0,a.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,a.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"New Post"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("form",{onSubmit:Z(G),autoComplete:"off",className:"grid grid-cols-1 gap-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"col-span-2 p-4 bg-white border border-gray-200 rounded-lg shadow-sm lg:mr-3 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(o.NI,{isInvalid:!!L.post_title,mb:4,children:[(0,a.jsx)(n.l,{children:"Title"}),(0,a.jsx)(d.I,{placeholder:"Original Title",...B("post_title",{required:"Please input the title!"})})]}),(0,a.jsxs)(o.NI,{isInvalid:!!L.post_excerp,mb:4,children:[(0,a.jsx)(n.l,{children:"Article Description"}),(0,a.jsx)(c.g,{placeholder:"Summary Article",rows:4,maxLength:160,...B("post_excerp",{required:"Please input summary!"})}),(0,a.jsx)(u.xu,{fontSize:"sm",children:"* Max 160 characters"})]}),(0,a.jsxs)(o.NI,{isInvalid:!!L.post_content,mb:4,children:[(0,a.jsx)(n.l,{children:"Content"}),(0,a.jsx)(X,{theme:N,setValue:H}),(0,a.jsx)(h.J1,{children:(null===(e=L.content)||void 0===e?void 0:e.message)&&"string"==typeof L.content.message&&L.content.message})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(o.NI,{isInvalid:!!L.post_slug,mb:4,children:[(0,a.jsx)(n.l,{children:"Slug"}),(0,a.jsx)(d.I,{readOnly:!0,placeholder:"Slug",...B("post_slug",{required:"Please input slug!"})})]}),(0,a.jsxs)(o.NI,{isInvalid:!!L.post_type,mb:4,children:[(0,a.jsx)(n.l,{children:"Type"}),(0,a.jsxs)(p.P,{...B("post_type",{required:"Please input the type!"}),children:[(0,a.jsx)("option",{value:"1",children:"Default"}),(0,a.jsx)("option",{value:"2",children:"Video"}),(0,a.jsx)("option",{value:"3",children:"Gallery"})]})]}),(0,a.jsxs)(o.NI,{isInvalid:!!L.category,mb:4,children:[(0,a.jsx)(n.l,{children:"Category"}),(0,a.jsx)("div",{className:"border border-gray-200 p-2 h-[250px] overflow-y-auto",children:D.length>0?(0,a.jsx)(g.c,{colorScheme:"red",onChange:e=>{let t=D.filter(t=>e.includes(t.id.toString())),s=t.map(e=>e.name),a=t.map(e=>e.id.toString());H("post_category",s,{shouldValidate:!0}),H("post_category_id",a,{shouldValidate:!0})},children:(0,a.jsx)(m.g,{align:"start",children:D.map(e=>(0,a.jsx)(x.X,{value:e.id.toString(),children:e.name},e.id))})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.O,{height:3}),(0,a.jsx)(f.O,{height:3,my:2}),(0,a.jsx)(f.O,{height:3,my:2}),(0,a.jsx)(f.O,{height:3,my:2}),(0,a.jsx)(f.O,{height:3,my:2}),(0,a.jsx)(f.O,{height:3,my:2}),(0,a.jsx)(f.O,{height:3})]})}),(0,a.jsx)(h.J1,{children:(null===(t=L.category)||void 0===t?void 0:t.message)&&"string"==typeof L.category.message&&L.category.message})]}),(0,a.jsxs)(o.NI,{isInvalid:!!L.publishOn,mb:4,children:[(0,a.jsx)(n.l,{children:"Publish On"}),(0,a.jsx)("div",{className:"border border-gray-200 p-2 h-[270px] overflow-y-auto",children:(0,a.jsx)(g.c,{colorScheme:"red",onChange:e=>H("publishOn",e,{shouldValidate:!0}),children:(0,a.jsxs)(m.g,{align:"start",children:[(0,a.jsx)(x.X,{value:"uzone",children:"Uzone"}),(0,a.jsx)(x.X,{value:"internetPositif",children:"Internet Positif"}),(0,a.jsx)(x.X,{value:"mercusuar",children:"Mercusuar"}),(0,a.jsx)(x.X,{value:"wifiID",children:"Wifi ID"}),(0,a.jsx)(x.X,{value:"internetFiltering",children:"Internet Filtering"}),(0,a.jsx)(x.X,{value:"rcti",children:"RCTI +"}),(0,a.jsx)(x.X,{value:"diarium",children:"Diarium"}),(0,a.jsx)(x.X,{value:"cazbond",children:"Cazbond"})]})})}),(0,a.jsx)(h.J1,{children:(null===(s=L.publishOn)||void 0===s?void 0:s.message)&&"string"==typeof L.publishOn.message&&L.publishOn.message})]}),(0,a.jsx)(q,{session:z,control:J,errors:L,theme:N,Controller:y.Qr,setValue:H}),(0,a.jsxs)(o.NI,{isInvalid:!!L.post_status,mb:4,children:[(0,a.jsx)(n.l,{children:"Status"}),(0,a.jsx)(v.E,{colorScheme:"red",onChange:e=>H("post_status",e,{shouldValidate:!0}),children:(0,a.jsxs)(j.U,{spacing:"24px",children:[(0,a.jsx)(b.Y,{value:"draft",children:"Draft"}),(0,a.jsx)(b.Y,{value:"schedule",children:"Schedule"}),(0,a.jsx)(b.Y,{value:"publish",children:"Publish"})]})}),(0,a.jsx)(h.J1,{children:(null===(S=L.post_status)||void 0===S?void 0:S.message)&&"string"==typeof L.post_status.message&&L.post_status.message})]}),(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)(_.z,{className:"w-full",children:"Preview"}),(0,a.jsx)(_.z,{className:"w-full",onClick:E,children:"Set Feature Image"}),(0,a.jsx)(_.z,{colorScheme:"red",type:"submit",className:"w-full",isLoading:T,children:"Publish"})]})]})]})})]})}},98053:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(38472);async function l(e,t,s,l){try{let i;return i="GET"==e?{validateStatus:()=>!1,method:e,headers:l,url:t,params:s}:{validateStatus:()=>!1,method:e,headers:l,url:t,data:s},await (0,a.Z)(i).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[296,8173,434,6849,2322,5917,6300,3867,8472,9343,9957,2971,7023,1744],function(){return e(e.s=85142)}),_N_E=e.O()}]);