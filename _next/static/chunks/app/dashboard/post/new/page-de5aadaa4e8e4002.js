(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{5142:function(e,s,t){Promise.resolve().then(t.t.bind(t,8173,23)),Promise.resolve().then(t.bind(t,912)),Promise.resolve().then(t.bind(t,1481)),Promise.resolve().then(t.bind(t,8198))},8198:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return q}});var a=t(7437),l=t(2265),r=t(5443),i=t(610),o=t(9769),n=t(864),d=t(4379),c=t(4757),u=t(4340),h=t(671),p=t(4537),m=t(6962),g=t(4937),x=t(9565),v=t(2823),f=t(9386),j=t(55),b=t(5874),_=t(9343),y=t(9512),S=t(2737),k=t.n(S),I=t(998),w=t(8053),N=t(6511),z=t(4367),C=t(8978),P=t(9484),E=t(5222),D=t(6493),Y=t(408),O=t(530),F=t(1726);function M(e){let{isOpen:s,register:t,onClose:r}=e,[i,o]=l.useState("");return(0,a.jsxs)(z.u_,{size:"lg",isOpen:s,onClose:r,children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(P.h,{children:[(0,a.jsx)(E.x,{children:"Set Feature Image"}),(0,a.jsx)(D.o,{}),(0,a.jsx)(Y.f,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"my-4 text-xl font-semibold text-center",children:"From URL"}),(0,a.jsx)(d.I,{placeholder:"Input External Image URL",value:i,...t("feature_img"),onChange:e=>o(e.target.value)}),(0,a.jsx)(d.I,{placeholder:"Caption Foto",...t("post_images_title",{required:!0}),my:5}),i&&(0,a.jsx)(O.E,{src:i,alt:"Selected",objectFit:"cover",boxSize:"200px",mx:"auto",mt:4})]})}),(0,a.jsx)(F.m,{textAlign:"center",children:(0,a.jsx)(b.z,{mx:"auto",colorScheme:"red",onClick:r,children:"Submit"})})]})]})}var V=t(6463),X=t(6829),T=t(2861),A=t.n(T);function R(e){let{theme:s,setValue:t}=e,[r,i]=l.useState(""),[o,n]=l.useState(!1),d=l.useRef(null),c=l.useMemo(()=>({readonly:!1,height:800,theme:"dark"==s?"jodit_dark":"default",showXPathInStatusbar:!1,spellcheck:!1,allowResizeX:!1,allowResizeY:!1,hidePoweredByJodit:!0,placeholder:"Start writing here...",aiAssistant:!1,buttons:["undo","redo","|","bold","italic","underline","strikethrough","|","left","center","right","justify","|","ul","ol","fontsize","indent","outdent","|","table","link","file","image","video","|","brush","source","preview","|"],disablePlugins:["about","add-new-line","ai-assistant","backspace","class-span","clipboard","copyformat","delete-command","dtd","enter","focus","font","format-block","hotkeys","hr","inline-popup","key-arrow-outside","limit","mobile","paste","paste-storage","powered-by-jodit","redo-undo","resize-cells","resize-handler","resizer","select","speech-recognize","spellcheck","stat","symbols","xpath","wrap-nodes"],uploader:{url:"https://xdsoft.net/jodit/finder/?action=fileUpload",insertImageAsBase64URI:!0,imagesExtensions:[".jpg",".png",".gif"],data:{},format:"json",headers:{},prepareData:e=>e,isSuccess:e=>200===e.status,getMessage:e=>e.message,process:e=>e.files,defaultHandlerSuccess:(e,s,t,a)=>{t.getFiles().forEach(e=>{e.isImage()&&a(e)})}},filebrowser:{ajax:{url:"https://xdsoft.net/jodit/finder/"},height:580,pagination:{pageSize:20}}}),[s]);return l.useEffect(()=>{n(!0)},[]),(0,a.jsx)(a.Fragment,{children:o?(0,a.jsx)(A(),{ref:d,value:r,config:c,onBlur:e=>{i(e),t("post_content",e,{shouldValidate:!0})}}):(0,a.jsx)(X.$,{size:"lg",colorScheme:"red"})})}function q(){var e,s,t,S;let{data:z}=(0,I.useSession)(),{theme:C}=(0,y.F)(),{isOpen:P,onOpen:E,onClose:D}=(0,r.q)(),[Y,O]=l.useState([]),[F,X]=l.useState([]),[T,A]=l.useState(!1),q=(0,V.useRouter)(),{register:H,handleSubmit:Z,formState:{errors:B},setValue:L,watch:U,control:G}=(0,_.cI)(),J=(0,_.qo)({control:G,name:"post_title"}),Q=(0,i.p)(),W=async e=>{var s,t;A(!0),e.post_date=k()().format("YYYY-MM-DD HH:mm:ss"),e.post_publish_date=k()().format("YYYY-MM-DD HH:mm:ss"),e.post_original_date=k()().format("YYYY-MM-DD HH:mm:ss"),e.post_status=[e.post_status],e.post_author=z.user.username,e.post_tag=e.post_tag.map(e=>e.label),e.is_premium=0,e.partner_id=1,e.post_video_url="",e.post_gallery="",e.post_modified="",e.feat_img_size={small:{x:"string",y:"string"},medium:{x:"string",y:"string"},full:{x:"string",y:"string"}},e.post_publisher=[""],e.post_editor=0,e.post_source=0,e.post_canonical_link="",e.is_ghost=0,e.post_enclosure_link="",e.post_title_masking="";let a=await (0,w.Z)("POST","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/articles/"),e,{accept:"application/json",Authorization:"Bearer ".concat(null==z?void 0:null===(s=z.user)||void 0===s?void 0:s.access_token)});(null==a?void 0:a.status)==201?(A(!1),Q({title:"Success",description:"Data has been saved",status:"success",duration:6e3,isClosable:!0}),q.push("/dashboard/post/list")):(A(!1),Q({title:"Error",description:null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,status:"error",duration:6e3,isClosable:!0}))},$=async e=>{var s,t,a;let l=await (0,w.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/tags/"),{page:1,limit:100,search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==z?void 0:null===(s=z.user)||void 0===s?void 0:s.access_token)});(null==l?void 0:l.status)==200&&X(null==l?void 0:null===(a=l.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.tags.map(e=>({label:e.name,value:e.id})))},K={control:e=>({...e,backgroundColor:"dark"===C?"#2D3748":"#fff",color:"dark"===C?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===C?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===C?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===C?"#4A5568":"#E2E8F0",color:"dark"===C?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===C?"#fff":"#000"})};return l.useEffect(()=>{let e=async()=>{var e,s;let t=await (0,w.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/article-categories/"),{page:1,limit:100},{accept:"application/json",Authorization:"Bearer ".concat(null==z?void 0:null===(e=z.user)||void 0===e?void 0:e.access_token)});(null==t?void 0:t.status)==200&&O(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.data)};z&&e()},[z]),l.useEffect(()=>{J&&L("post_slug",J.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""))},[J,L]),(0,a.jsxs)("div",{className:"px-4 pt-6",children:[(0,a.jsx)(M,{register:H,isOpen:P,onClose:D}),(0,a.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,a.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"New Post"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("form",{onSubmit:Z(W),autoComplete:"off",className:"grid grid-cols-1 gap-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"col-span-2 p-4 bg-white border border-gray-200 rounded-lg shadow-sm lg:mr-3 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(o.NI,{isInvalid:!!B.post_title,mb:4,children:[(0,a.jsx)(n.l,{children:"Title"}),(0,a.jsx)(d.I,{placeholder:"Original Title",...H("post_title",{required:"Please input the title!"})})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.post_excerp,mb:4,children:[(0,a.jsx)(n.l,{children:"Article Description"}),(0,a.jsx)(c.g,{placeholder:"Summary Article",rows:4,maxLength:160,...H("post_excerp",{required:"Please input summary!"})}),(0,a.jsx)(u.xu,{fontSize:"sm",children:"* Max 160 characters"})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.post_content,mb:4,children:[(0,a.jsx)(n.l,{children:"Content"}),(0,a.jsx)(R,{theme:C,setValue:L}),(0,a.jsx)(h.J1,{children:(null===(e=B.content)||void 0===e?void 0:e.message)&&"string"==typeof B.content.message&&B.content.message})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(o.NI,{isInvalid:!!B.post_slug,mb:4,children:[(0,a.jsx)(n.l,{children:"Slug"}),(0,a.jsx)(d.I,{placeholder:"Slug",...H("post_slug",{required:"Please input slug!"})})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.post_type,mb:4,children:[(0,a.jsx)(n.l,{children:"Type"}),(0,a.jsxs)(p.P,{...H("post_type",{required:"Please input the type!"}),children:[(0,a.jsx)("option",{value:"1",children:"Default"}),(0,a.jsx)("option",{value:"2",children:"Video"}),(0,a.jsx)("option",{value:"3",children:"Gallery"})]})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.category,mb:4,children:[(0,a.jsx)(n.l,{children:"Category"}),(0,a.jsx)("div",{className:"border border-gray-200 p-2 h-[250px] overflow-y-auto",children:(0,a.jsx)(m.c,{colorScheme:"red",onChange:e=>{let s=Y.filter(s=>e.includes(s.id.toString())),t=s.map(e=>e.name),a=s.map(e=>e.id.toString());L("post_category",t,{shouldValidate:!0}),L("post_category_id",a,{shouldValidate:!0})},children:(0,a.jsx)(g.g,{align:"start",children:Y.map(e=>(0,a.jsx)(x.X,{value:e.id.toString(),children:e.name},e.id))})})}),(0,a.jsx)(h.J1,{children:(null===(s=B.category)||void 0===s?void 0:s.message)&&"string"==typeof B.category.message&&B.category.message})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.publishOn,mb:4,children:[(0,a.jsx)(n.l,{children:"Publish On"}),(0,a.jsx)("div",{className:"border border-gray-200 p-2 h-[270px] overflow-y-auto",children:(0,a.jsx)(m.c,{colorScheme:"red",onChange:e=>L("publishOn",e,{shouldValidate:!0}),children:(0,a.jsxs)(g.g,{align:"start",children:[(0,a.jsx)(x.X,{value:"uzone",children:"Uzone"}),(0,a.jsx)(x.X,{value:"internetPositif",children:"Internet Positif"}),(0,a.jsx)(x.X,{value:"mercusuar",children:"Mercusuar"}),(0,a.jsx)(x.X,{value:"wifiID",children:"Wifi ID"}),(0,a.jsx)(x.X,{value:"internetFiltering",children:"Internet Filtering"}),(0,a.jsx)(x.X,{value:"rcti",children:"RCTI +"}),(0,a.jsx)(x.X,{value:"diarium",children:"Diarium"}),(0,a.jsx)(x.X,{value:"cazbond",children:"Cazbond"})]})})}),(0,a.jsx)(h.J1,{children:(null===(t=B.publishOn)||void 0===t?void 0:t.message)&&"string"==typeof B.publishOn.message&&B.publishOn.message})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.post_tag,mb:4,children:[(0,a.jsx)(n.l,{children:"Tag"}),(0,a.jsx)(_.Qr,{name:"post_tag",control:G,defaultValue:[],render:e=>{let{field:s}=e;return(0,a.jsx)(N.ZP,{...s,isMulti:!0,styles:K,options:F,placeholder:"Select tags...",onChange:e=>{L("post_tag",e)},onInputChange:e=>{e&&$(e)},value:s.value})}})]}),(0,a.jsxs)(o.NI,{isInvalid:!!B.post_status,mb:4,children:[(0,a.jsx)(n.l,{children:"Status"}),(0,a.jsx)(v.E,{colorScheme:"red",onChange:e=>L("post_status",e,{shouldValidate:!0}),children:(0,a.jsxs)(f.U,{spacing:"24px",children:[(0,a.jsx)(j.Y,{value:"draft",children:"Draft"}),(0,a.jsx)(j.Y,{value:"schedule",children:"Schedule"}),(0,a.jsx)(j.Y,{value:"publish",children:"Publish"})]})}),(0,a.jsx)(h.J1,{children:(null===(S=B.post_status)||void 0===S?void 0:S.message)&&"string"==typeof B.post_status.message&&B.post_status.message})]}),(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)(b.z,{className:"w-full",children:"Preview"}),(0,a.jsx)(b.z,{className:"w-full",onClick:E,children:"Set Feature Image"}),(0,a.jsx)(b.z,{colorScheme:"red",type:"submit",className:"w-full",isLoading:T,children:"Publish"})]})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 mt-4 lg:grid-cols-3",children:(0,a.jsxs)("div",{className:"col-span-2 p-4 bg-white border border-gray-200 rounded-lg shadow-sm lg:mr-3 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsx)("p",{className:"mb-4 font-semibold",children:"Preview Google"}),(0,a.jsx)(b.z,{children:"Preview"})]})})]})}},8053:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(8472);async function l(e,s,t,l){try{let r;return r="GET"==e?{validateStatus:()=>!1,method:e,headers:l,url:s,params:t}:{validateStatus:()=>!1,method:e,headers:l,url:s,data:t},await (0,a.Z)(r).catch(e=>e.response)}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[296,8173,434,6849,2322,784,6300,2407,2766,4302,2971,7023,1744],function(){return e(e.s=5142)}),_N_E=e.O()}]);