(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6739:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,86057))},86057:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(57437),s=a(2265),i=a(307),o=a(89427),n=a(16098),l=a(80605),d=a(45987),c=a(25922);function m(e){let{dateRange:t,isUpdate:a}=e,[m,u]=s.useState(!0),[h,p]=s.useState([]),{data:y}=(0,l.useSession)(),{theme:f}=(0,c.F)(),b="dark"===f?"#fff":"#000";s.useEffect(()=>{let e=async()=>{var e;u(!0);let a=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,n.Z)(t[0]).startOf("month").format("YYYY-MM-DD"),end_date:(0,n.Z)(t[1]).format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.access_token)});u(!1),200===a.status&&p(a.data)};y&&a&&2===t.length&&e()},[y,a]);let x=[...Array.from(new Set(h.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()).map(e=>{let t=h.flatMap(t=>t.activities.filter(t=>t.activity_date===e));return{date:e,dayOfMonth:(0,n.Z)(e).format("DD MMM"),created:t.reduce((e,t)=>e+t.created_posts,0),published:t.reduce((e,t)=>e+t.published_posts,0),sameDay:t.reduce((e,t)=>e+t.created_and_published_same_day,0)}}),v={title:{text:"Daily Posts Activity Overview ".concat((0,n.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:b}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=x[e[0].dataIndex].date,a="<strong>".concat((0,n.Z)(t).format("DD MMMM YYYY"),"</strong><br/>");return e.forEach(e=>{a+="".concat(e.seriesName,": ").concat(e.value,"<br/>")}),a}},legend:{data:["Created Posts","Published Posts","Same Day Posts"],top:"30",textStyle:{color:b}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:x.map(e=>e.dayOfMonth),name:"Day",nameLocation:"middle",nameGap:18,nameTextStyle:{fontSize:14,fontWeight:"bold",color:b},axisLabel:{rotate:0,formatter:e=>e,color:b}},yAxis:{type:"value",name:"Number of Posts",nameLocation:"middle",nameGap:40,nameTextStyle:{color:b},axisLabel:{color:b}},series:[{name:"Created Posts",type:"bar",data:x.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published Posts",type:"bar",data:x.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day Posts",type:"line",data:x.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]},g=h.map(e=>{let t=e.activities.reduce((e,t)=>({created:e.created+t.created_posts,published:e.published+t.published_posts,sameDay:e.sameDay+t.created_and_published_same_day}),{created:0,published:0,sameDay:0});return{name:"".concat(e.first_name," ").concat(e.last_name),...t}}),S={title:{text:"User Performance Overview ".concat((0,n.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:b}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Created","Published","Same Day"],top:"30",textStyle:{color:b}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{color:b}},yAxis:{type:"category",data:g.map(e=>e.name),axisLabel:{width:100,overflow:"truncate",color:b}},series:[{name:"Created",type:"bar",data:g.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published",type:"bar",data:g.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day",type:"bar",data:g.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,r.jsx)("div",{className:"w-full space-y-8",children:m?(0,r.jsx)(i.E,{size:"xs",isIndeterminate:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-full h-[450px]",children:(0,r.jsx)(d.Z,{option:v,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,r.jsx)("div",{className:"w-full h-[400px]",children:(0,r.jsx)(d.Z,{option:S,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})})}var u=a(85994),h=a.n(u),p=a(25810);a(21005);var y=a(71096),f=a.n(y);function b(){let[e,t]=s.useState([f()().startOf("month").toDate(),f()().toDate()]),[a,i]=e,[o,n]=s.useState(1);return(0,r.jsxs)("div",{className:"px-4 pt-6",children:[(0,r.jsxs)("div",{className:"grid items-center justify-between grid-cols-2",children:[(0,r.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,r.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})}),(0,r.jsxs)("div",{className:"flex justify-end mb-4",children:[(0,r.jsx)(h(),{className:"bg-white dark:bg-gray-800",selectsRange:!0,startDate:a,endDate:i,dateFormat:"dd-MM-yyyy",onChange:e=>{t(e)},isClearable:!0}),(0,r.jsx)(p.z,{ml:4,my:"auto",onClick:()=>n(Math.floor(1e4*Math.random())),colorScheme:"blue",children:"Submit"})]})]}),(0,r.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:(0,r.jsx)(m,{dateRange:e,isUpdate:o})})]})}},16098:function(e,t,a){"use strict";var r=a(71096),s=a.n(r);s()().format("HH:mm"),t.Z=s()},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(83464),s=a(80605);async function i(e,t,a,i){try{let o;o="GET"==e?{validateStatus:()=>!1,method:e,headers:i,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:i,url:t,data:a};let n=await (0,r.Z)(o).catch(e=>e.response);return 401==n.status&&await (0,s.signOut)(),n}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[7360,1544,9701,5878,605,3464,6599,6539,2971,2117,1744],function(){return e(e.s=6739)}),_N_E=e.O()}]);