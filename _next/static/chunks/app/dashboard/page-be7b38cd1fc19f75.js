(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6739:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,41847))},41847:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(57437),r=a(2265),o=a(307),i=a(89427),l=a(16098),n=a(80605),c=a(45987),d=a(25922);function m(e){let{dateRange:t,isUpdate:a}=e,[m,u]=r.useState(!0),[y,p]=r.useState([]),{data:h}=(0,n.useSession)(),{theme:x}=(0,d.F)(),f="dark"===x?"#fff":"#000";r.useEffect(()=>{let e=async()=>{var e;u(!0);let a=await (0,i.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,l.Z)(t[0]).startOf("month").format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.access_token)});u(!1),200===a.status&&p(a.data)};h&&a&&2===t.length&&e()},[h,a]);let g=[...Array.from(new Set(y.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()).map(e=>{let t=y.flatMap(t=>t.activities.filter(t=>t.activity_date===e));return{date:e,dayOfMonth:(0,l.Z)(e).format("DD MMM"),created:t.reduce((e,t)=>e+t.created_posts,0),published:t.reduce((e,t)=>e+t.published_posts,0),sameDay:t.reduce((e,t)=>e+t.created_and_published_same_day,0)}}),b={title:{text:"Daily Posts Activity Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:f}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=g[e[0].dataIndex].date,a="<strong>".concat((0,l.Z)(t).format("DD MMMM YYYY"),"</strong><br/>");return e.forEach(e=>{a+="".concat(e.seriesName,": ").concat(e.value,"<br/>")}),a}},legend:{data:["Created Posts","Published Posts","Same Day Posts"],top:"30",textStyle:{color:f}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:g.map(e=>e.dayOfMonth),name:"Day",nameLocation:"middle",nameGap:18,nameTextStyle:{fontSize:14,fontWeight:"bold",color:f},axisLabel:{rotate:0,formatter:e=>e,color:f}},yAxis:{type:"value",name:"Number of Posts",nameLocation:"middle",nameGap:40,nameTextStyle:{color:f},axisLabel:{color:f}},series:[{name:"Created Posts",type:"bar",data:g.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published Posts",type:"bar",data:g.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day Posts",type:"line",data:g.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]},v=y.map(e=>{let t=e.activities.reduce((e,t)=>({created:e.created+t.created_posts,published:e.published+t.published_posts,sameDay:e.sameDay+t.created_and_published_same_day}),{created:0,published:0,sameDay:0});return{name:"".concat(e.first_name," ").concat(e.last_name),...t}}),_={title:{text:"User Performance Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:f}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Created","Published","Same Day"],top:"30",textStyle:{color:f}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{color:f}},yAxis:{type:"category",data:v.map(e=>e.name),axisLabel:{width:100,overflow:"truncate",color:f}},series:[{name:"Created",type:"bar",data:v.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published",type:"bar",data:v.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day",type:"bar",data:v.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,s.jsx)("div",{className:"w-full space-y-8",children:m?(0,s.jsx)(o.E,{size:"xs",isIndeterminate:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full h-[450px]",children:(0,s.jsx)(c.Z,{option:b,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[400px]",children:(0,s.jsx)(c.Z,{option:_,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})})}function u(e){let{dateRange:t,isUpdate:a}=e,[o,m]=r.useState({kanal_summary:[],articles:{},total_articles:0}),{theme:u}=(0,d.F)(),{data:y}=(0,n.useSession)(),p="dark"===u?"#fff":"#000",h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.replace(/-/g," ").substring(0,t)+(e.length>t?"...":"")},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=o.articles[e]||[];return Array.isArray(a)?(a.length>0?null==a?void 0:a.toSorted((e,t)=>t.total_count-e.total_count):[]).slice(0,t):(console.error("channelArticles is not an array",a),[])},f={title:{text:"Channel Summary: Articles and Total Views",left:"center",textStyle:{color:p}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Total Articles","Total Views"],top:30,textStyle:{color:p}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:o.kanal_summary.map(e=>e.kanal),axisLabel:{color:p}},yAxis:[{type:"value",name:"Total Articles",position:"left",axisLine:{show:!0,lineStyle:{color:"#5470C6"}},axisLabel:{color:p}},{type:"value",name:"Total Views",position:"right",axisLine:{show:!0,lineStyle:{color:"#91CC75"}},axisLabel:{color:p}}],series:[{name:"Total Articles",type:"bar",data:o.kanal_summary.map(e=>e.total_articles),yAxisIndex:0,itemStyle:{color:"#5470C6"}},{name:"Total Views",type:"line",data:o.kanal_summary.map(e=>e.total_count),yAxisIndex:1,itemStyle:{color:"#91CC75"}}]},g={title:{text:"Top 10 Gadget Articles by Total Views",left:"center",textStyle:{color:p}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:x("Gadget").map(e=>h(e.slug)),axisLabel:{rotate:45,interval:0,color:p}},yAxis:{type:"value",name:"Total Views",axisLabel:{color:p}},series:[{name:"Views",type:"bar",data:x("Gadget").map(e=>e.total_count),itemStyle:{color:"#3398DB"}}]};return r.useEffect(()=>{let e=async()=>{var e;let a=await (0,i.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/articles/kanal-count"),{start_date:(0,l.Z)(t[0]).startOf("month").format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),categories:["games","automotive","gadget","telco"],sort_by:["total_count"],sort_order:"desc"},{accept:"application/json",Authorization:"Bearer ".concat(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.access_token)});200===a.status&&m(a.data.data)};y&&a&&2===t.length&&e()},[y,a,t]),(0,s.jsxs)("div",{className:"w-full mt-16 space-y-8",children:[(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:f,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:g,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})}var y=a(85994),p=a.n(y),h=a(25810);a(21005);var x=a(71096),f=a.n(x);function g(){let[e,t]=r.useState([f()().startOf("month").toDate(),f()().toDate()]),[a,o]=e,[i,l]=r.useState(1);return(0,s.jsxs)("div",{className:"px-4 pt-6",children:[(0,s.jsxs)("div",{className:"grid items-center justify-between grid-cols-1 lg:grid-cols-2",children:[(0,s.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})}),(0,s.jsxs)("div",{className:"flex justify-end mb-4 lg:justify-end",children:[(0,s.jsx)(p(),{className:"bg-white dark:bg-gray-800",selectsRange:!0,startDate:a,endDate:o,dateFormat:"dd-MM-yyyy",onChange:e=>{t(e)},isClearable:!0}),(0,s.jsx)(h.z,{ml:4,my:"auto",onClick:()=>l(Math.floor(1e4*Math.random())),colorScheme:"blue",children:"Submit"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,s.jsx)(m,{dateRange:e,isUpdate:i}),(0,s.jsx)(u,{dateRange:e,isUpdate:i})]})]})}},16098:function(e,t,a){"use strict";var s=a(71096),r=a.n(s);r()().format("HH:mm"),t.Z=r()},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(83464),r=a(80605);async function o(e,t,a,o){try{let i;i="GET"==e?{validateStatus:()=>!1,method:e,headers:o,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:o,url:t,data:a};let l=await (0,s.Z)(i).catch(e=>e.response);return 401==l.status&&await (0,r.signOut)(),l}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[7360,1544,9701,5878,605,3464,9614,6627,2971,2117,1744],function(){return e(e.s=6739)}),_N_E=e.O()}]);