(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6739:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,41847))},41847:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(57437),r=a(2265),i=a(307),o=a(89427),l=a(16098),n=a(80605),c=a(45987),d=a(25922);function m(e){let{dateRange:t,isUpdate:a}=e,[m,u]=r.useState(!0),[p,y]=r.useState([]),{data:h}=(0,n.useSession)(),{theme:x}=(0,d.F)(),f="dark"===x?"#fff":"#000";r.useEffect(()=>{let e=async()=>{var e;u(!0);let a=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,l.Z)(t[0]).startOf("month").format("YYYY-MM-DD"),end_date:(0,l.Z)(t[1]).format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.access_token)});u(!1),200===a.status&&y(a.data)};h&&a&&2===t.length&&e()},[h,a]);let g=[...Array.from(new Set(p.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()).map(e=>{let t=p.flatMap(t=>t.activities.filter(t=>t.activity_date===e));return{date:e,dayOfMonth:(0,l.Z)(e).format("DD MMM"),created:t.reduce((e,t)=>e+t.created_posts,0),published:t.reduce((e,t)=>e+t.published_posts,0),sameDay:t.reduce((e,t)=>e+t.created_and_published_same_day,0)}}),b={title:{text:"Daily Posts Activity Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:f}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=g[e[0].dataIndex].date,a="<strong>".concat((0,l.Z)(t).format("DD MMMM YYYY"),"</strong><br/>");return e.forEach(e=>{a+="".concat(e.seriesName,": ").concat(e.value,"<br/>")}),a}},legend:{data:["Created Posts","Published Posts","Same Day Posts"],top:"30",textStyle:{color:f}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:g.map(e=>e.dayOfMonth),name:"Day",nameLocation:"middle",nameGap:18,nameTextStyle:{fontSize:14,fontWeight:"bold",color:f},axisLabel:{rotate:0,formatter:e=>e,color:f}},yAxis:{type:"value",name:"Number of Posts",nameLocation:"middle",nameGap:40,nameTextStyle:{color:f},axisLabel:{color:f}},series:[{name:"Created Posts",type:"bar",data:g.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published Posts",type:"bar",data:g.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day Posts",type:"line",data:g.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]},v=p.map(e=>{let t=e.activities.reduce((e,t)=>({created:e.created+t.created_posts,published:e.published+t.published_posts,sameDay:e.sameDay+t.created_and_published_same_day}),{created:0,published:0,sameDay:0});return{name:"".concat(e.first_name," ").concat(e.last_name),...t}}),_={title:{text:"User Performance Overview ".concat((0,l.Z)().format("MMMM YYYY")),left:"center",textStyle:{color:f}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Created","Published","Same Day"],top:"30",textStyle:{color:f}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{color:f}},yAxis:{type:"category",data:v.map(e=>e.name),axisLabel:{width:100,overflow:"truncate",color:f}},series:[{name:"Created",type:"bar",data:v.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published",type:"bar",data:v.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day",type:"bar",data:v.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,s.jsx)("div",{className:"w-full space-y-8",children:m?(0,s.jsx)(i.E,{size:"xs",isIndeterminate:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full h-[450px]",children:(0,s.jsx)(c.Z,{option:b,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[400px]",children:(0,s.jsx)(c.Z,{option:_,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})})}function u(e){var t,a,i;let{dateRange:m,isUpdate:u}=e,[p,y]=r.useState(!0),[h,x]=r.useState({kanal_summary:[],articles:[],total_articles:0}),{data:f}=(0,n.useSession)(),{theme:g}=(0,d.F)();r.useEffect(()=>{let e=async()=>{var e;y(!0);let t=await (0,o.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/articles/kanal-count"),{start_date:(0,l.Z)(m[0]).startOf("month").format("YYYY-MM-DD"),end_date:(0,l.Z)(m[1]).format("YYYY-MM-DD"),categories:["games","automotive","gadget","telco"],sort_by:["total_count"],sort_order:"desc"},{accept:"application/json",Authorization:"Bearer ".concat(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.access_token)});y(!1),200===t.status&&x(t.data.data)};f&&u&&2===m.length&&e()},[f,u,m]);let b=(null===(i=h.articles)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:null===(t=a.Gadget)||void 0===t?void 0:t.sort((e,t)=>t.total_count-e.total_count).slice(0,10))||[],v={title:{text:"Top 10 Gadget Articles by Total Views",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:b.map(e=>e.slug.replace(/-/g," ").substring(0,30)+"..."),axisLabel:{rotate:45,interval:0}},yAxis:{type:"value",name:"Total Views"},series:[{name:"Views",type:"bar",data:b.map(e=>e.total_count),itemStyle:{color:"#3398DB"}}]},_=h.kanal_summary.map(e=>({name:e.kanal.join(" - "),articles:e.total_articles,totalCount:e.total_count})),w={title:{text:"Channel Summary: Articles and Total Views",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Total Articles","Total Views"],top:30},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:_.map(e=>e.name)},yAxis:[{type:"value",name:"Total Articles",position:"left",axisLine:{show:!0,lineStyle:{color:"#5470C6"}}},{type:"value",name:"Total Views",position:"right",axisLine:{show:!0,lineStyle:{color:"#91CC75"}}}],series:[{name:"Total Articles",type:"bar",data:_.map(e=>e.articles),yAxisIndex:0,itemStyle:{color:"#5470C6"}},{name:"Total Views",type:"line",data:_.map(e=>e.totalCount),yAxisIndex:1,itemStyle:{color:"#91CC75"}}]};return(0,s.jsxs)("div",{className:"w-full mt-16 space-y-8",children:[(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:w,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[500px]",children:(0,s.jsx)(c.Z,{option:v,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})}var p=a(85994),y=a.n(p),h=a(25810);a(21005);var x=a(71096),f=a.n(x);function g(){let[e,t]=r.useState([f()().startOf("month").toDate(),f()().toDate()]),[a,i]=e,[o,l]=r.useState(1);return(0,s.jsxs)("div",{className:"px-4 pt-6",children:[(0,s.jsxs)("div",{className:"grid items-center justify-between grid-cols-2",children:[(0,s.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})}),(0,s.jsxs)("div",{className:"flex justify-end mb-4",children:[(0,s.jsx)(y(),{className:"bg-white dark:bg-gray-800",selectsRange:!0,startDate:a,endDate:i,dateFormat:"dd-MM-yyyy",onChange:e=>{t(e)},isClearable:!0}),(0,s.jsx)(h.z,{ml:4,my:"auto",onClick:()=>l(Math.floor(1e4*Math.random())),colorScheme:"blue",children:"Submit"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,s.jsx)(m,{dateRange:e,isUpdate:o}),(0,s.jsx)(u,{dateRange:e,isUpdate:o})]})]})}},16098:function(e,t,a){"use strict";var s=a(71096),r=a.n(s);r()().format("HH:mm"),t.Z=r()},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(83464),r=a(80605);async function i(e,t,a,i){try{let o;o="GET"==e?{validateStatus:()=>!1,method:e,headers:i,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:i,url:t,data:a};let l=await (0,s.Z)(o).catch(e=>e.response);return 401==l.status&&await (0,r.signOut)(),l}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[7360,1544,9701,5878,605,3464,6599,6539,2971,2117,1744],function(){return e(e.s=6739)}),_N_E=e.O()}]);