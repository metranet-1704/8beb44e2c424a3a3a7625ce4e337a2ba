(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6739:function(e,t,a){Promise.resolve().then(a.t.bind(a,65878,23)),Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,86057))},86057:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(57437),r=a(2265),i=a(307),n=a(89427),d=a(16098),o=a(80605),c=a(45987);function l(){let[e,t]=r.useState(!0),[a,l]=r.useState([]),{data:m}=(0,o.useSession)();r.useEffect(()=>{let e=async()=>{var e;t(!0);let a=await (0,n.Z)("POST","".concat("https://mercury.uzone.id/","api/v1/reports/user_activities"),{start_date:(0,d.Z)().startOf("month").format("YYYY-MM-DD"),end_date:(0,d.Z)().format("YYYY-MM-DD"),user_ids:[]},{accept:"application/json",Authorization:"Bearer ".concat(null==m?void 0:null===(e=m.user)||void 0===e?void 0:e.access_token)});t(!1),200===a.status&&l(a.data)};m&&e()},[m]);let u=[...Array.from(new Set(a.flatMap(e=>e.activities.map(e=>e.activity_date))))].sort((e,t)=>new Date(e).getTime()-new Date(t).getTime()).map(e=>{let t=a.flatMap(t=>t.activities.filter(t=>t.activity_date===e));return{date:e,dayOfMonth:(0,d.Z)(e).format("DD MMM"),created:t.reduce((e,t)=>e+t.created_posts,0),published:t.reduce((e,t)=>e+t.published_posts,0),sameDay:t.reduce((e,t)=>e+t.created_and_published_same_day,0)}}),p={title:{text:"Daily Posts Activity Overview ".concat((0,d.Z)().format("MMMM YYYY")),left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=u[e[0].dataIndex].date,a="<strong>".concat((0,d.Z)(t).format("DD MMMM YYYY"),"</strong><br/>");return e.forEach(e=>{a+="".concat(e.seriesName,": ").concat(e.value,"<br/>")}),a}},legend:{data:["Created Posts","Published Posts","Same Day Posts"],top:"30"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:u.map(e=>e.dayOfMonth),name:"Day",nameLocation:"middle",nameGap:18,nameTextStyle:{fontSize:14,fontWeight:"bold"},axisLabel:{rotate:0,formatter:e=>e}},yAxis:{type:"value",name:"Number of Posts",nameLocation:"middle",nameGap:40},series:[{name:"Created Posts",type:"bar",data:u.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published Posts",type:"bar",data:u.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day Posts",type:"line",data:u.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]},h=a.map(e=>{let t=e.activities.reduce((e,t)=>({created:e.created+t.created_posts,published:e.published+t.published_posts,sameDay:e.sameDay+t.created_and_published_same_day}),{created:0,published:0,sameDay:0});return{name:"".concat(e.first_name," ").concat(e.last_name),...t}}),y={title:{text:"User Performance Overview ".concat((0,d.Z)().format("MMMM YYYY")),left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Created","Published","Same Day"],top:"30"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:h.map(e=>e.name),axisLabel:{width:100,overflow:"truncate"}},series:[{name:"Created",type:"bar",data:h.map(e=>e.created),itemStyle:{color:"#5470c6"}},{name:"Published",type:"bar",data:h.map(e=>e.published),itemStyle:{color:"#91cc75"}},{name:"Same Day",type:"bar",data:h.map(e=>e.sameDay),itemStyle:{color:"#fac858"}}]};return(0,s.jsx)("div",{className:"w-full space-y-8",children:e?(0,s.jsx)(i.E,{size:"xs",isIndeterminate:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full h-[450px]",children:(0,s.jsx)(c.Z,{option:p,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})}),(0,s.jsx)("div",{className:"w-full h-[400px]",children:(0,s.jsx)(c.Z,{option:y,style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})})]})})}function m(){return(0,s.jsxs)("div",{className:"px-4 pt-6",children:[(0,s.jsxs)("div",{className:"grid items-center justify-between grid-cols-2",children:[(0,s.jsx)("div",{className:"flex items-center mb-4 lg:mb-0",children:(0,s.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"m-2",children:(0,s.jsx)("div",{className:"max-w-md mx-auto"})})})]}),(0,s.jsx)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:(0,s.jsx)(l,{})})]})}},16098:function(e,t,a){"use strict";var s=a(71096),r=a.n(s);r()().format("HH:mm"),t.Z=r()},89427:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(83464),r=a(80605);async function i(e,t,a,i){try{let n;n="GET"==e?{validateStatus:()=>!1,method:e,headers:i,url:t,params:a}:{validateStatus:()=>!1,method:e,headers:i,url:t,data:a};let d=await (0,s.Z)(n).catch(e=>e.response);return 401==d.status&&await (0,r.signOut)(),d}catch(e){return{data:e,status:500,statusText:"Internal Server Error",headers:{},config:{}}}}}},function(e){e.O(0,[9701,5878,605,3464,8948,2971,2117,1744],function(){return e(e.s=6739)}),_N_E=e.O()}]);