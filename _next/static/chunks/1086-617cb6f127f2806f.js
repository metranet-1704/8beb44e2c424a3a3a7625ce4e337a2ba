"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1086],{65594:function(e,t,s){s.d(t,{Z:function(){return ei}});var a=s(57437),l=s(2265),r=s(69340),i=s(95171),n=s(40748),o=s(70996),c=s(32191),d=s(34394),u=s(25810),h=s(4231),m=s(10883),p=s(4964),g=s(8938),x=s(26262),v=s(90316),f=s(42709),j=s(58055),b=s(24687),_=s(307),y=s(95944),k=s.n(y),w=s(19383),C=s(48860),S=s(34096),N=s(49270),I=s(27924),P=s(16152),z=s(20517),T=s(8782),D=s(80605),L=s(89427),E=e=>{let{onSelectArticle:t,theme:s,isOpen:r,onClose:i}=e,[n,o]=l.useState([]),[c,d]=l.useState(!1),[h,m]=l.useState(""),[p,g]=l.useState(null),[x,v]=l.useState(1),[f,j]=l.useState(1),[b,_]=l.useState(!0),{data:y}=(0,D.useSession)(),k=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((b||!(t>1))&&!c){d(!0);try{var a,l,r,i,n,u,h;let c=await (0,L.Z)("GET","".concat("https://mercury.uzone.id/","api/v1/articles/baca-juga"),{search:e,page:t,limit:10},{accept:"application/json",Authorization:"Bearer ".concat(null==y?void 0:null===(a=y.user)||void 0===a?void 0:a.access_token)});if((null==c?void 0:c.status)===200){let e=null==c?void 0:null===(r=c.data)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.articles.map(e=>({label:e.post_title,value:e.post_title,post_slug:e.post_slug,featured_image:e.feature_img}));o(t=>s?[...t,...e]:e),j((null==c?void 0:null===(n=c.data)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.total_pages)||1),_(t<(null==c?void 0:null===(h=c.data)||void 0===h?void 0:null===(u=h.data)||void 0===u?void 0:u.total_pages)),v(t)}}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}}};return l.useEffect(()=>{let e=setTimeout(()=>{h?(v(1),_(!0),o([]),k(h,1,!1)):(o([]),_(!1))},500);return()=>{clearTimeout(e)}},[h]),(0,a.jsxs)(w.u_,{size:"xl",isOpen:r,onClose:i,children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(S.h,{children:[(0,a.jsx)(N.x,{children:"Baca Juga"}),(0,a.jsx)(I.o,{}),(0,a.jsx)(P.f,{children:(0,a.jsx)(T.ZP,{styles:{control:e=>({...e,backgroundColor:"dark"===s?"#2D3748":"#fff",color:"dark"===s?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===s?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===s?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===s?"#4A5568":"#E2E8F0",color:"dark"===s?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===s?"#fff":"#000"})},options:n,isLoading:c,placeholder:"Search title...",onChange:g,onInputChange:m,onMenuScrollToBottom:()=>{!c&&b&&k(h,x+1,!0)}})}),(0,a.jsx)(z.m,{children:(0,a.jsx)(u.z,{colorScheme:"blue",onClick:()=>{t(p),i()},children:"Select"})})]})]})},F=s(72760),A=e=>{let{onSelectEmbed:t,theme:s,isOpen:r,onClose:i}=e,[n,o]=(0,l.useState)(""),[d,h]=(0,l.useState)("X"),[m,g]=(0,l.useState)(!1),x={X:{src:"https://platform.twitter.com/widgets.js",reinitialize:()=>{var e;return null===(e=window.twttr)||void 0===e?void 0:e.widgets.load()}},Instagram:{src:"https://www.instagram.com/embed.js",reinitialize:()=>{var e;return null===(e=window.instgrm)||void 0===e?void 0:e.Embeds.process()}},Facebook:{src:"https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0",reinitialize:()=>{var e;return null===(e=window.FB)||void 0===e?void 0:e.XFBML.parse()}},Flickr:{src:"https://embedr.flickr.com/assets/client-code.js",reinitialize:()=>{}},TikTok:{src:"https://www.tiktok.com/embed.js",reinitialize:()=>{console.log("TikTok script loaded")}},LinkedIn:{src:"https://platform.linkedin.com/in.js",reinitialize:()=>{var e,t;null===(e=window.IN)||void 0===e||e.init(),null===(t=window.IN)||void 0===t||t.parse()}},Pinterest:{src:"https://assets.pinterest.com/js/pinit.js",reinitialize:()=>{var e;return null===(e=window.PinUtils)||void 0===e?void 0:e.build()}},Reddit:{src:"https://embed.redditmedia.com/widgets/platform.js",reinitialize:()=>{var e;return null===(e=window.redditmedia)||void 0===e?void 0:e.widgets.load()}}},v=e=>new Promise((t,s)=>{let a=x[e];if(!a){console.warn("No script configuration available for platform: ".concat(e)),s(Error("Invalid platform: ".concat(e)));return}let l=document.querySelector('script[src="'.concat(a.src,'"]'));l&&l.remove();let r=document.createElement("script");r.src=a.src,r.async=!0,r.onload=()=>{console.log("".concat(e," script loaded successfully.")),a.reinitialize(),t()},r.onerror=t=>{console.error("Error loading ".concat(e," script:"),t),s(t)},document.body.appendChild(r)}),f=async()=>{try{g(!0),t(n),"Flickr"!==d&&await v(d),o(""),i()}catch(e){console.error("Error loading social media script:",e)}finally{g(!1)}};return(0,a.jsxs)(w.u_,{size:"xl",isOpen:r,onClose:i,closeOnOverlayClick:!m,closeOnEsc:!m,children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(S.h,{children:[(0,a.jsx)(N.x,{children:"Embed Social Media"}),(0,a.jsx)(I.o,{isDisabled:m}),(0,a.jsxs)(P.f,{children:[(0,a.jsxs)(p.P,{placeholder:"Select platform",value:d,onChange:e=>h(e.target.value),mb:4,isDisabled:m,children:[(0,a.jsx)("option",{value:"X",children:"X (Twitter)"}),(0,a.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,a.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,a.jsx)("option",{value:"Flickr",children:"Flickr"}),(0,a.jsx)("option",{value:"TikTok",children:"TikTok"}),(0,a.jsx)("option",{value:"LinkedIn",children:"LinkedIn"}),(0,a.jsx)("option",{value:"Pinterest",children:"Pinterest"}),(0,a.jsx)("option",{value:"Reddit",children:"Reddit"})]}),(0,a.jsx)(c.g,{size:"sm",placeholder:(e=>{switch(e){case"X":return"Paste X (Twitter) embed code or tweet URL";case"Instagram":return"Paste Instagram embed code or post URL";case"Facebook":return"Paste Facebook embed code or post URL";case"Flickr":return"Paste Flickr embed code or image URL";case"TikTok":return"Paste TikTok embed code or video URL";case"LinkedIn":return"Paste LinkedIn embed code or post URL";case"Pinterest":return"Paste Pinterest embed code or pin URL";case"Reddit":return"Paste Reddit embed code or post URL";default:return"Paste embed code or URL here"}})(d),onChange:e=>o(e.target.value),value:n,resize:"none",rows:10,isDisabled:m})]}),(0,a.jsx)(z.m,{children:(0,a.jsx)(u.z,{colorScheme:"blue",onClick:f,isLoading:m,loadingText:"Loading Script",spinnerPlacement:"start",leftIcon:m?(0,a.jsx)(F.$,{size:"sm"}):void 0,isDisabled:!n||!d,children:"Select"})})]})]})},R=s(8181),X=s(68193),H=s(61273),V=s(25957),B=s(83930);function O(e){let{isOpen:t,onClose:s,setValue:r,onSelectImage:i}=e,{openMedia:n,seletectedImage:o}=(0,V.G)(),{imageTextEditor:d,setImageTextEditor:h,setIsInsertImage:p}=(0,B.k)(),[g,x]=l.useState("");return l.useEffect(()=>{o&&r("feature_img",o,{shouldValidate:!0})},[o,r]),(0,a.jsxs)(w.u_,{size:"lg",isOpen:t,onClose:s,scrollBehavior:"inside",children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(S.h,{children:[(0,a.jsx)(N.x,{children:"Insert Image"}),(0,a.jsx)(I.o,{}),(0,a.jsxs)(P.f,{overflowY:"auto",children:[(0,a.jsxs)(R.B,{children:[(0,a.jsx)(m.I,{value:d,placeholder:"URL Image",onChange:e=>h(e.target.value)}),(0,a.jsx)(X.x,{children:(0,a.jsx)(u.z,{onClick:()=>{n(),s()},className:"!p-2",children:(0,a.jsx)(H.K7z,{className:"w-7 h-7"})})})]}),(0,a.jsx)(c.g,{onChange:e=>x(e.target.value),placeholder:"Caption",my:5,value:g})]}),(0,a.jsx)(z.m,{textAlign:"center",children:(0,a.jsx)(u.z,{mx:"auto",colorScheme:"red",onClick:()=>{i({image:d,caption:g}),s(),p(!1),x(""),h("")},children:"Insert"})})]})]})}function M(e){let{theme:t,setValue:s,trigger:i,saveContentToDraft:n,watch:o}=e,[c,d]=l.useState(""),[u,h]=l.useState(!1),[m,p]=l.useState(null),{isOpen:g,onOpen:x,onClose:v}=(0,r.q)(),{isOpen:f,onOpen:j,onClose:b}=(0,r.q)(),y=l.useRef(null),{dataPost:w,setIsInsertImage:C,isOpenImage:S,onOpenImage:N,onCloseImage:I}=(0,B.k)(),P=l.useMemo(()=>({events:{afterInit:e=>{y.current=e},beforePaste:e=>{let t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("text/html");if(s){e.preventDefault();let t=z(s);return y.current.selection.insertHTML(t),!1}if(t)return e.preventDefault(),y.current.selection.insertHTML(t),!1}},askBeforePasteHTML:!1,askBeforePasteFromWord:!1,defaultActionOnPaste:"insert_clear_html",defaultActionOnPasteFromWord:"insert_clear_html",pastePlain:!1,toolbarSticky:!0,toolbarStickyOffset:350,readonly:!1,height:800,theme:"dark"===t?"jodit_dark":"default",hidePoweredByJodit:!0,showCharsCounter:!0,showWordsCounter:!0,placeholder:"Start writing here...",aiAssistant:!1,buttons:["undo","redo","|","bold","italic","underline","strikethrough","|","left","center","right","justify","|","ul","ol","fontsize","indent","outdent","|","table","link",{name:"Images",iconURL:"dark"===t?"https://cdn.jsdelivr.net/gh/metranet-1704/8d2a271545b09ffc20c93a85d68b8cdd@main/images/icons/image-gray.svg":"https://cdn.jsdelivr.net/gh/metranet-1704/8d2a271545b09ffc20c93a85d68b8cdd@main/images/icons/image-black.svg",exec:()=>{p(y.current.selection.save()),N(),C(!0)},tooltip:"Insert images"},"video","|","brush","source","preview","|"],extraButtons:[{name:"Embed Socmed",exec:()=>{p(y.current.selection.save()),j()},tooltip:"Insert social media embed"},{name:"Baca Juga",exec:()=>{p(y.current.selection.save()),x()},tooltip:"Insert related article"}],disablePlugins:["about","add-new-line","ai-assistant","backspace","class-span","copyformat","delete-command","enter","focus","font","format-block","hotkeys","inline-popup","key-arrow-outside","limit","mobile","powered-by-jodit","redo-undo","select","speech-recognize","spellcheck","symbols","xpath","wrap-nodes","image"]}),[t,x,j,N,C]),z=e=>{let t=document.createElement("div");t.innerHTML=e;let s=e=>{if("A"!==e.tagName&&["class","style","lang","link","vlink","xmlns:w","xmlns:o","xmlns:m","xmlns:v"].forEach(t=>{e.removeAttribute(t)}),"A"===e.tagName){let t=e.getAttribute("href");Array.from(e.attributes).forEach(t=>{e.removeAttribute(t.name)}),t&&e.setAttribute("href",t)}Array.from(e.children).forEach(e=>{s(e)})};s(t);let a=e=>{Array.from(e.children).forEach(e=>{var t,s;if("P"===e.tagName&&!(null===(t=e.textContent)||void 0===t?void 0:t.trim())){e.remove();return}if("SPAN"===e.tagName&&!e.getAttribute("style")&&(null===(s=e.parentElement)||void 0===s?void 0:s.tagName)!=="A"){let t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);e.remove()}}a(e)})};return a(t),t.innerHTML};return l.useEffect(()=>{h(!0),w?d(w.post_content):d("")},[w]),(0,a.jsx)(a.Fragment,{children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E,{theme:t,isOpen:g,onClose:v,onSelectArticle:e=>{let t=y.current;if(null==t?void 0:t.selection){let s='\n                <div class="p-0 px-5 pb-4 border-l-4 border-red-600 mb-4 bg-transparent clear-both">\n                    <h4 class="font-bold text-lg mb-4 text-red-600">Baca Juga :</h4>\n                    <div class="float-left">\n                        <a href="https://uzone.id/'.concat(e.post_slug,'" target="_blank">\n                            <img src="').concat(e.featured_image,'" alt="Images" title="').concat(e.label,'" class="w-28 h-20  object-cover rounded-lg">\n                        </a>\n                    </div>\n                    <div class="relative ml-32">\n                        <h5 class="font-bold text-base mt-5 underline">\n                            <a href="https://uzone.id/').concat(e.post_slug,'" target="_blank">').concat(e.label,'</a>\n                        </h5>\n                    </div>\n                    <div class="clear-both h-0"></div>\n                </div>\n                ');t.selection.restore(m),t.selection.insertHTML(s)}else console.error("Editor instance or selection not found")}}),(0,a.jsx)(A,{theme:t,isOpen:f,onClose:b,onSelectEmbed:e=>{let t=y.current;(null==t?void 0:t.selection)?(t.selection.restore(m),t.selection.insertHTML(e)):console.error("Editor instance or selection not found")}}),(0,a.jsx)(O,{isOpen:S,onClose:I,setValue:s,onSelectImage:e=>{let t=y.current;if(null==t?void 0:t.selection){let s='\n                <figure class="inline-block">\n                    <img src="'.concat(e.image,'" alt="').concat(e.caption,'" title="').concat(e.caption,'">\n                    <figcaption class="text-center mb-5 text-xs italic text-gray-400">').concat(e.caption,"</figcaption>\n                </figure>\n                ");t.selection.restore(m),t.selection.insertHTML(s)}else console.error("Editor instance or selection not found")}}),(0,a.jsx)(k(),{value:c,config:P,onBlur:e=>{d(e),i("post_content"),s("post_content",e,{shouldValidate:!0})}})]}):(0,a.jsx)(_.E,{size:"xs",isIndeterminate:!0})})}function U(e){var t;let{errors:s,control:r,theme:o,Controller:c,setValue:d,session:u,trigger:h}=e,{dataPost:m}=(0,B.k)(),[p,g]=l.useState([]),[x,v]=l.useState([]),[f,j]=l.useState(""),b={control:e=>({...e,backgroundColor:"dark"===o?"#2D3748":"#fff",color:"dark"===o?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===o?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===o?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===o?"#4A5568":"#E2E8F0",color:"dark"===o?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===o?"#fff":"#000"})},_=e=>({label:e,value:e.toLowerCase().replace(/\W/g,"-")}),y=async e=>{var t;let s=await (0,L.Z)("GET","".concat("https://mercury.uzone.id/","api/v1/tags/"),{page:1,limit:100,search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==u?void 0:null===(t=u.user)||void 0===t?void 0:t.access_token)});(null==s?void 0:s.status)===200&&g(s.data.data.tags.map(e=>({label:e.name,value:e.name})))},k=e=>{if(f&&(","===e.key||"Enter"===e.key)){if(e.preventDefault(),!x.find(e=>e.label.toLowerCase()===f.toLowerCase())){let e=[...x,_(f)];v(e),d("post_tag",e,{shouldValidate:!0}),h("post_tag")}j("")}};return l.useEffect(()=>{if(m){var e;let t=null===(e=m.post_tag)||void 0===e?void 0:e.map(e=>({label:e,value:e}));g(t||[]),v(t||[]),d("post_tag",t)}else g([]),v([])},[m]),(0,a.jsxs)(i.NI,{isInvalid:!!s.post_tag,mb:4,children:[(0,a.jsx)(n.l,{children:"Tag"}),(0,a.jsx)(c,{name:"post_tag",control:r,render:e=>{let{field:{onChange:t,value:s,...l}}=e;return(0,a.jsx)(T.ZP,{...l,isMulti:!0,styles:b,options:p,placeholder:"Select or type tags...",onChange:e=>{let s=e||[];v(s),t(s),h("post_tag")},onInputChange:(e,t)=>{let{action:s}=t;"input-change"===s&&(j(e),e&&y(e))},onKeyDown:k,inputValue:f,value:x,isClearable:!0,menuPlacement:"auto"})}}),(0,a.jsx)("p",{className:"text-sm text-red-500",children:(null===(t=s.post_tag)||void 0===t?void 0:t.message)&&"Tag is required and must be at least 1 tag."})]})}s(98983);var G=s(33145),W=s(25922),q=s(15607),Z=s.n(q);function J(e){let{theme:t,setValue:s,trigger:r,Controller:i,control:n}=e,[o,c]=l.useState(""),[d,u]=l.useState(!1),h=l.useRef(null),{dataPost:m}=(0,B.k)(),p=e=>e.replace(/<[^>]*>/g,"").trim().toLowerCase().replace(/&nbsp;/g,"-").replace(/ /g,"-").replace(/[^\w-]+/g,"").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),g=l.useCallback(Z()(e=>{c(e),r("post_title"),s("post_title",e,{shouldValidate:!0}),s("post_slug",p(e))},500),[s,r]);l.useEffect(()=>()=>{g.cancel()},[g]);let x=l.useMemo(()=>({events:{afterInit:e=>{h.current=e},change:e=>{e.length>70?h.current.currentPlace.container.style.border="1px solid red":h.current.currentPlace.container.style.border="1px solid #dadada"},beforePaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain");return t&&h.current.selection.insertHTML(t),!1}},askBeforePasteHTML:!1,askBeforePasteFromWord:!1,defaultActionOnPaste:"insert_only_text",defaultActionOnPasteFromWord:"insert_only_text",toolbarSticky:!0,toolbarStickyOffset:80,readonly:!1,height:"80px",minHeight:"80px",maxHeight:"80px",theme:"dark"==t?"jodit_dark":"default",hidePoweredByJodit:!0,showCharsCounter:!0,showWordsCounter:!0,placeholder:"Original Title",aiAssistant:!1,buttons:["bold","italic","underline","strikethrough"],statusbar:!1,disablePlugins:["about","add-new-line","ai-assistant","backspace","class-span","clipboard","copyformat","delete-command","enter","focus","font","resize","format-block","hotkeys","inline-popup","key-arrow-outside","limit","mobile","powered-by-jodit","redo-undo","select","speech-recognize","spellcheck","symbols","xpath","wrap-nodes"]}),[t]);return l.useEffect(()=>{u(!0),m?c(m.post_title):c("")},[m]),(0,a.jsx)(a.Fragment,{children:d?(0,a.jsx)(i,{name:"post_title",control:n,rules:{required:"This field is required"},render:e=>{let{field:{onChange:t,value:s}}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)(k(),{value:o,config:x,onChange:e=>{h.current.value=e,g(e)}}),o.length>70&&(0,a.jsx)("p",{className:"float-right text-sm italic font-semibold text-red-500",children:"characters more than 70 characters"})]})}}):(0,a.jsx)(_.E,{size:"xs",isIndeterminate:!0})})}var Y=s(85330),K=s(37417);function $(e){let{isOpen:t,onClose:s}=e,{setIsModalMedia:l}=(0,V.G)(),{isInsertImage:r}=(0,B.k)();return(0,a.jsx)(Y.h,{children:(0,a.jsxs)(w.u_,{isOpen:t,onClose:()=>{s(),l()},scrollBehavior:"inside",children:[(0,a.jsx)(C.Z,{}),(0,a.jsxs)(S.h,{width:{base:"full",md:"80%"},height:{base:"full",md:"80%"},maxWidth:"none",children:[(0,a.jsx)(N.x,{children:r?"Insert/Edit Image":"Media Gallery"}),(0,a.jsx)(I.o,{}),(0,a.jsx)(P.f,{className:"",children:(0,a.jsx)(K.default,{})})]})]})})}var Q=s(93088);function ee(e){let{register:t,errors:s,watch:r,session:o,setValue:c}=e,d=r("contributor_name"),[u,h]=l.useState(d?"1":"0"),[g,x]=l.useState(""),[v,j]=l.useState([]);return l.useEffect(()=>{let e=async()=>{var e;let t=await (0,L.Z)("GET","".concat("https://mercury.uzone.id/","api/v1/articles/authors"),{},{accept:"application/json",Authorization:"Bearer ".concat(null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.access_token)});200===t.status&&(j(t.data.data),x(t.data.data.find(e=>"".concat(e.first_name," ").concat(e.last_name)===d)?"Writer":"Contributor"))};o&&e()},[o,d]),(0,a.jsxs)(i.NI,{isInvalid:!!s.post_slug,mb:4,children:[(0,a.jsx)(n.l,{children:"Post as other writers / contributors"}),(0,a.jsxs)("div",{className:"flex gap-7",children:[(0,a.jsx)(f.E,{defaultValue:"0",my:"auto",value:u,onChange:e=>h(e),children:(0,a.jsxs)(Q.K,{spacing:5,direction:"row",children:[(0,a.jsx)(b.Y,{colorScheme:"red",value:"0",children:"No"}),(0,a.jsx)(b.Y,{colorScheme:"green",value:"1",children:"Yes"})]})}),"1"===u&&(0,a.jsxs)(p.P,{maxW:200,onChange:e=>x(e.target.value),value:g,children:[(0,a.jsx)("option",{value:"",children:"Select an Author"}),(0,a.jsx)("option",{value:"Writer",children:"Writer"}),(0,a.jsx)("option",{value:"Contributor",children:"Contributor"})]}),"1"===u&&"Writer"===g?(0,a.jsxs)(p.P,{...t("contributor",{required:"Please input contributors"}),value:d||"",maxW:200,onChange:e=>{c("contributor_name",e.target.value)},children:[(0,a.jsx)("option",{value:"",children:"Select a contributor"}),v.length>0&&v.map(e=>(0,a.jsx)("option",{value:"".concat(e.first_name," ").concat(e.last_name),children:"".concat(e.first_name," ").concat(e.last_name)},e.id))]}):(0,a.jsx)(a.Fragment,{children:"1"===u&&"Contributor"===g&&(0,a.jsx)(m.I,{placeholder:"contributor",...t("contributor",{required:"Please input contributor"})})})]})]})}var et=s(85994),es=s.n(et);s(21005);var ea=s(71096),el=s.n(ea),er=s(99376);function ei(e){var t,s,_,y,k,w,C,S,N;let{register:I,errors:P,session:z,control:T,setValue:D,Controller:L,trigger:E,isLoading:F,setIsModalMedia:A,seletectedImage:R,openFeatureImage:X,watch:B,useFieldArray:O,saveContentToDraft:q}=e,{theme:Z}=(0,W.F)(),Y=B("post_type"),K=B("post_gallery"),Q=B("post_status"),et=B("post_publish_date"),{isOpenMedia:ea,openMedia:ei,closeMedia:en,onOpenGallery:eo,gallery:ec,setGallery:ed}=(0,V.G)(),{fields:eu,remove:eh}=O({control:T,name:"post_gallery"}),{isOpen:em,onToggle:ep}=(0,r.q)(),[eg,ex]=l.useState(et?el()(et,"YYYY-MM-DD HH:mm:ss").toDate():new Date),ev=new Date;ev.setHours(ev.getHours()+24);let ef={4:"Games",9:"Automotive",15:"Berita Pilihan",16:"Headline",24:"Ramadan",27:"Startup",28:"Telco",29:"Gadget",30:"Digilife",38:"Tips & Reco's",43:"Review",44:"Timeless",46:"Bremm Journey",47:"Govtech"},ej=(0,er.useSearchParams)(),eb=ej.get("aa"),e_=ej.get("isDraft");return l.useEffect(()=>{Array.isArray(ec)&&ec.length>0&&D("post_gallery",ec.map((e,t)=>{var s;return{img:e.img,caption:(null==K?void 0:null===(s=K[t])||void 0===s?void 0:s.caption)||""}}),{shouldValidate:!0})},[ec]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($,{isOpen:ea,onClose:en}),(0,a.jsxs)("div",{className:"col-span-2 p-4 bg-white border border-gray-200 rounded-lg shadow-sm lg:mr-3 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(i.NI,{className:"mb-6",isInvalid:!!P.post_title,mb:4,children:[(0,a.jsx)(n.l,{children:"Title"}),(0,a.jsx)(J,{trigger:E,theme:Z,setValue:D,Controller:L,control:T,errors:P}),(0,a.jsx)(o.xu,{fontSize:"xs",fontStyle:"italic",children:"* Max 70 characters"})]}),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_excerp,mb:4,children:[(0,a.jsx)(n.l,{children:"Article Description"}),(0,a.jsx)(c.g,{placeholder:"Summary Article",rows:4,maxLength:300,...I("post_excerp",{required:"Please input summary!",maxLength:{value:300,message:"Summary cannot exceed 160 characters"}})}),(0,a.jsx)(o.xu,{fontSize:"xs",fontStyle:"italic",children:"* Max 160 characters"})]}),(0,a.jsx)(ee,{register:I,errors:P,watch:B,session:z,setValue:D}),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_content,mb:4,children:[(0,a.jsx)(n.l,{children:"Content"}),(0,a.jsx)(M,{trigger:E,theme:Z,setValue:D,saveContentToDraft:q,watch:B}),(0,a.jsx)(d.J1,{children:(null===(t=P.post_content)||void 0===t?void 0:t.message)&&"string"==typeof P.post_content.message&&P.post_content.message})]}),(0,a.jsxs)("div",{className:"p-3 border rounded-md",children:[(0,a.jsx)("p",{className:"text-xl font-semibold",children:"Preview Google"}),(0,a.jsx)(u.z,{onClick:ep,my:4,colorScheme:"blue",children:"Preview"}),(0,a.jsxs)(h.U,{in:em,animateOpacity:!0,children:[(0,a.jsxs)("div",{className:"p-3 border rounded-md",children:[(0,a.jsxs)("p",{className:"text-xs",children:["https://uzone.id/",B("post_slug")]}),(0,a.jsx)("p",{className:"text-xl text-blue-600",children:B("post_title")}),(0,a.jsx)("p",{className:"text-sm",children:B("post_excerp")})]}),(0,a.jsxs)("div",{className:"p-3 mt-6 border rounded-md",children:[(0,a.jsx)("p",{className:"mb-3 text-base",children:"Notes"}),(0,a.jsxs)("p",{className:"text-sm",children:["Title Length: ",null===(s=B("post_title"))||void 0===s?void 0:s.length," / 70 Characters"]}),(0,a.jsxs)("p",{className:"my-3 text-sm",children:["Description Length:"," ",null===(_=B("post_excerp"))||void 0===_?void 0:_.length," / 160 Characters"]}),(0,a.jsxs)("p",{className:"text-sm",children:["Content Length: ",null===(y=B("post_content"))||void 0===y?void 0:y.length]})]})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,a.jsxs)(i.NI,{isInvalid:!!P.post_slug,mb:4,children:[(0,a.jsx)(n.l,{children:"Slug"}),(0,a.jsx)(m.I,{placeholder:"Slug",...I("post_slug",{required:"Please input slug!"})})]}),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_type,mb:4,children:[(0,a.jsx)(n.l,{children:"Type"}),(0,a.jsxs)(p.P,{...I("post_type",{required:"Please input the type!"}),children:[(0,a.jsx)("option",{value:"1",children:"Default"}),(0,a.jsx)("option",{value:"2",children:"Video"}),(0,a.jsx)("option",{value:"3",children:"Gallery"})]})]}),(null==Y?void 0:Y.toString())==="2"&&(0,a.jsxs)(i.NI,{isInvalid:!!P.post_video_url,mb:4,children:[(0,a.jsx)(n.l,{children:"Video URL"}),(0,a.jsx)(m.I,{type:"url",placeholder:"Video URL",...I("post_video_url",{required:"Please input video URL!"})})]}),(null==Y?void 0:Y.toString())==="3"&&(0,a.jsx)(u.z,{leftIcon:(0,a.jsx)(H.K7z,{}),colorScheme:"teal",variant:"outline",onClick:()=>{ei(),eo()},className:"my-3",children:"From Gallery"}),eu.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 my-1 border rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsx)("div",{className:"relative aspect-video",children:(0,a.jsx)(G.default,{src:e.img,width:100,height:60,alt:"Gallery image ".concat(t+1),className:"object-cover w-full h-full rounded-sm"})}),(0,a.jsx)("div",{className:"flex flex-col h-full",children:(0,a.jsx)("div",{className:"flex-grow overflow-hidden",children:(0,a.jsx)(c.g,{...I("post_gallery.".concat(t,".caption")),placeholder:"Enter caption...",size:"sm",resize:"none",maxH:"inherit",height:"inherit",sx:{height:"100%",minHeight:"0",maxHeight:"none"}})})})]}),(0,a.jsx)(u.z,{type:"button",onClick:()=>{eh(t),ed(K.filter((e,s)=>s!==t).map(e=>({img:e.img,caption:e.caption})))},colorScheme:"red",size:"sm",className:"w-full my-2",children:"Remove Image"})]},e.id)),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_category,mb:4,children:[(0,a.jsx)(n.l,{children:"Category"}),(0,a.jsxs)("div",{className:"border border-gray-200",children:[(0,a.jsx)("div",{className:"p-2 bg-white border-b border-gray-200 dark:bg-gray-800",children:(0,a.jsx)(L,{name:"post_category_id",control:T,render:e=>{let{field:t}=e;return(0,a.jsx)(g.c,{...t,colorScheme:"red",defaultValue:["15"],onChange:e=>{D("post_category",e.map(e=>ef[e]),{shouldValidate:!0}),t.onChange(e)},children:(0,a.jsxs)(x.g,{fontWeight:"500",align:"start",spacing:2,children:[(0,a.jsx)(v.X,{value:"15",children:"Berita Pilihan"}),(0,a.jsx)(v.X,{value:"16",children:"Headline"})]})})}})}),(0,a.jsx)("div",{className:"p-2 h-[200px] overflow-y-auto",children:(0,a.jsx)(L,{name:"post_category_id",control:T,render:e=>{let{field:t}=e;return(0,a.jsx)(g.c,{...t,colorScheme:"red",onChange:e=>{D("post_category",e.map(e=>ef[e]),{shouldValidate:!0}),t.onChange(e)},children:(0,a.jsxs)(x.g,{align:"start",spacing:2,children:[(0,a.jsx)(v.X,{value:"4",children:"Games"}),(0,a.jsx)(v.X,{value:"9",children:"Automotive"}),(0,a.jsx)(v.X,{value:"24",children:"Ramadan"}),(0,a.jsx)(v.X,{value:"27",children:"Startup"}),(0,a.jsx)(v.X,{value:"28",children:"Telco"}),(0,a.jsx)(v.X,{value:"29",children:"Gadget"}),(0,a.jsx)(v.X,{value:"30",children:"Digilife"}),(0,a.jsx)(v.X,{value:"38",children:"Tips & Reco's"}),(0,a.jsx)(v.X,{value:"43",children:"Review"}),(0,a.jsx)(v.X,{value:"44",children:"Timeless"}),(0,a.jsx)(v.X,{value:"46",children:"Bremm Journey"}),(0,a.jsx)(v.X,{value:"47",children:"Govtech"})]})})}})})]}),(0,a.jsx)(d.J1,{children:(null===(k=P.post_category)||void 0===k?void 0:k.message)&&"string"==typeof P.post_category.message&&P.post_category.message})]}),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_publisher,mb:4,children:[(0,a.jsx)(n.l,{children:"Publish On"}),(0,a.jsx)(v.X,{isChecked:(null===(w=B("post_publisher"))||void 0===w?void 0:w.length)===5,onChange:e=>{D("post_publisher",e.target.checked?["1","6","7","9","10"]:[],{shouldValidate:!0})},colorScheme:"red",mb:2,children:"Check All"}),(0,a.jsx)("div",{className:"border border-gray-200 p-2 h-[270px] overflow-y-auto",children:(0,a.jsx)(L,{name:"post_publisher",control:T,render:e=>{let{field:t}=e;return(0,a.jsx)(g.c,{...t,colorScheme:"red",onChange:e=>{D("post_publisher",e,{shouldValidate:!0}),t.onChange(e)},children:(0,a.jsxs)(x.g,{align:"start",children:[(0,a.jsx)(v.X,{value:"1",children:"Uzone"}),(0,a.jsx)(v.X,{value:"6",children:"Internet Positif"}),(0,a.jsx)(v.X,{value:"7",children:"Mercusuar"}),(0,a.jsx)(v.X,{value:"9",children:"Wifi ID"}),(0,a.jsx)(v.X,{value:"10",children:"Internet Filtering"}),(0,a.jsx)(v.X,{value:"22",children:"RCTI+"}),(0,a.jsx)(v.X,{value:"23",children:"Diarium"}),(0,a.jsx)(v.X,{value:"24",children:"Cazbond"})]})})}})}),(0,a.jsx)(d.J1,{children:(null===(C=P.post_publisher)||void 0===C?void 0:C.message)&&"string"==typeof P.post_publisher.message&&P.post_publisher.message})]}),(0,a.jsx)(U,{session:z,control:T,errors:P,theme:Z,Controller:L,setValue:D,trigger:E}),(0,a.jsxs)(i.NI,{isInvalid:!!P.post_status,mb:4,children:[(0,a.jsx)(n.l,{children:"Status"}),(0,a.jsx)(L,{name:"post_status",control:T,rules:{required:"Please select the status!"},render:e=>{var t,s;let{field:l}=e;return(0,a.jsx)(f.E,{...l,colorScheme:"red",onChange:e=>{l.onChange(e),D("post_status",e)},children:(0,a.jsxs)(j.U,{spacing:"24px",children:[(0,a.jsx)(b.Y,{isDisabled:eb&&!e_&&"publish"==Q&&(null==z?void 0:null===(t=z.user)||void 0===t?void 0:t.privilege_id)!==1,value:"draft",children:"Draft"}),(0,a.jsx)(b.Y,{isDisabled:eb&&!e_&&"publish"==Q&&(null==z?void 0:null===(s=z.user)||void 0===s?void 0:s.privilege_id)!==1,value:"scheduled",children:"Schedule"}),(0,a.jsx)(b.Y,{value:"publish",children:"Publish"})]})})}}),"scheduled"===Q&&(0,a.jsx)(es(),{className:"mt-4 bg-white dark:bg-gray-800 !w-[170px] !p-1",selected:eg,onChange:e=>{ex(e),D("post_publish_date",e)},timeInputLabel:"Time:",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"dd-MM-yyyy HH:mm",maxDate:ev,minDate:new Date,minTime:(null==eg?void 0:eg.toDateString())===new Date().toDateString()?new Date:new Date(new Date().setHours(0,0)),maxTime:new Date(new Date().setHours(23,59)),filterTime:e=>{let t=new Date(e),s=new Date;return(null==eg?void 0:eg.toDateString())!==s.toDateString()||t>=s}}),(0,a.jsx)(d.J1,{children:(null===(S=P.post_status)||void 0===S?void 0:S.message)&&"string"==typeof P.post_status.message&&P.post_status.message})]}),(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)(u.z,{className:"w-full",onClick:()=>{A(),X()},children:"Set Feature Image"}),(0,a.jsx)("p",{className:"text-sm italic text-red-500",children:(null===(N=P.feature_img)||void 0===N?void 0:N.message)&&"string"==typeof P.feature_img.message&&P.feature_img.message}),R&&(0,a.jsx)(G.default,{src:R,className:"w-full rounded-md",alt:"featured image",width:200,height:120}),(0,a.jsx)(u.z,{colorScheme:"red",type:"submit",className:"w-full capitalize",isLoading:F,children:eb?"Update":Q||"Draft"})]})]})]})}},82645:function(e,t,s){s.d(t,{Z:function(){return f}});var a=s(57437),l=s(2265),r=s(19383),i=s(48860),n=s(34096),o=s(49270),c=s(27924),d=s(16152),u=s(25810),h=s(10883),m=s(20517),p=s(61273),g=s(25957),x=s(33145);s(98983);var v=s(33289);function f(e){let{isOpen:t,register:s,onClose:f,setValue:j}=e,{openMedia:b,focalPoint:_,seletectedImage:y,setSeletectedImage:k,setFocalPoint:w}=(0,g.G)();return l.useEffect(()=>{y&&j("feature_img",y,{shouldValidate:!0})},[y,j]),(0,a.jsxs)(r.u_,{size:"xl",isOpen:t,onClose:f,scrollBehavior:"inside",children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)(n.h,{width:{base:"full",md:"70%"},height:{base:"full",md:"80%"},maxWidth:"none",overflowX:"auto",children:[(0,a.jsx)(o.x,{children:"Set Feature Image"}),(0,a.jsx)(c.o,{}),(0,a.jsx)(d.f,{children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"grid grid-rows-1 lg:grid-cols-10",children:[(0,a.jsx)(u.z,{leftIcon:(0,a.jsx)(p.K7z,{}),colorScheme:"blue",variant:"outline",onClick:()=>{b(),f()},className:"col-span-2",children:"From Gallery"}),(0,a.jsx)("p",{className:"col-span-2 text-xl font-semibold text-center",children:"or From URL"}),(0,a.jsx)(h.I,{placeholder:"Input External Image URL",className:"col-span-6",value:y,...s("feature_img"),onChange:e=>k(e.target.value)})]}),(0,a.jsx)("div",{className:"grid grid-rows-1 gap-4 my-5 lg:grid-cols-5",children:y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4",children:[(0,a.jsx)(v.U,{src:"".concat(y,"/800"),className:"!w-2/3 !h-full mx-auto",onChange:e=>{w(e)},classes:{image:"rounded-md"}}),(0,a.jsx)("p",{className:"mt-1 text-xs italic text-center",children:"drag point to adjust thumbnail"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.default,{src:"".concat(y,"/300"),className:"object-none rounded-md mx-auto w-[200px] h-[120px]",alt:"Selected",width:200,height:120,style:{objectPosition:"".concat(null==_?void 0:_.x,"% ").concat(null==_?void 0:_.y,"%")}}),(0,a.jsx)("p",{className:"mt-2 text-sm font-semibold",children:"Thumbnail Preview"})]})]})}),(0,a.jsx)(h.I,{placeholder:"Caption Foto",...s("post_images_title"),my:5})]})}),(0,a.jsx)(m.m,{textAlign:"center",children:(0,a.jsx)(u.z,{mx:"auto",colorScheme:"red",onClick:f,children:"Submit"})})]})]})}}}]);