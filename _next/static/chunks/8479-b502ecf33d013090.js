"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8479],{76725:function(e,s,t){t.d(s,{Z:function(){return Z}});var l=t(57437),a=t(2265),r=t(95171),n=t(40748),i=t(10883),o=t(32191),d=t(70996),c=t(34394),u=t(4964),h=t(8938),g=t(26262),m=t(90316),p=t(97244),x=t(42709),j=t(58055),f=t(24687),v=t(25810),b=t(69340),_=t(72760),y=t(95944),k=t.n(y),S=t(19383),I=t(48860),C=t(34096),w=t(49270),N=t(27924),z=t(16152),P=t(20517),F=t(82230),E=t(80605),O=t(89427),V=e=>{let{onSelectArticle:s,theme:t,isOpen:r,onClose:n}=e,[i,o]=a.useState([]),[d,c]=a.useState(!1),[u,h]=a.useState(""),[g,m]=a.useState(null),{data:p}=(0,E.useSession)(),x=async e=>{var s,t,l;c(!0);let a=await (0,O.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/articles/"),{page:1,limit:100,status:"publish",search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==p?void 0:null===(s=p.user)||void 0===s?void 0:s.access_token)});(null==a?void 0:a.status)==200&&o(null==a?void 0:null===(l=a.data)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.articles.map(e=>({label:e.post_title,value:e.post_title,post_slug:e.post_slug,featured_image:e.feature_img}))),c(!1)};return a.useEffect(()=>{let e=setTimeout(()=>{u&&x(u)},500);return()=>{clearTimeout(e)}},[u]),(0,l.jsxs)(S.u_,{size:"xl",isOpen:r,onClose:n,children:[(0,l.jsx)(I.Z,{}),(0,l.jsxs)(C.h,{children:[(0,l.jsx)(w.x,{children:"Baca Juga"}),(0,l.jsx)(N.o,{}),(0,l.jsx)(z.f,{children:(0,l.jsx)(F.ZP,{styles:{control:e=>({...e,backgroundColor:"dark"===t?"#2D3748":"#fff",color:"dark"===t?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===t?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===t?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===t?"#4A5568":"#E2E8F0",color:"dark"===t?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===t?"#fff":"#000"})},options:i,isLoading:d,placeholder:"Search title...",onChange:e=>m(e),onInputChange:e=>{h(e)}})}),(0,l.jsx)(P.m,{children:(0,l.jsx)(v.z,{colorScheme:"blue",onClick:()=>{s(g),n()},children:"Select"})})]})]})},D=t(83930);function T(e){let{theme:s,setValue:t,trigger:r}=e,[n,i]=a.useState(""),[o,d]=a.useState(!1),[c,u]=a.useState(null),{isOpen:h,onOpen:g,onClose:m}=(0,b.q)(),p=a.useRef(null),{dataPost:x}=(0,D.k)(),j=a.useMemo(()=>({events:{afterInit:e=>{p.current=e}},toolbarSticky:!0,toolbarStickyOffset:350,readonly:!1,height:800,theme:"dark"==s?"jodit_dark":"default",hidePoweredByJodit:!0,showCharsCounter:!0,showWordsCounter:!0,placeholder:"Start writing here...",aiAssistant:!1,buttons:["undo","redo","|","bold","italic","underline","strikethrough","|","left","center","right","justify","|","ul","ol","fontsize","indent","outdent","|","table","link","file","image","video","|","brush","source","preview","|"],extraButtons:[{name:"Baca Juga",exec:()=>{u(p.current.selection.save()),g()},tooltip:"Insert related article"}],disablePlugins:["about","add-new-line","ai-assistant","backspace","class-span","clipboard","copyformat","delete-command","dtd","enter","focus","font","format-block","hotkeys","hr","inline-popup","key-arrow-outside","limit","mobile","paste","paste-storage","powered-by-jodit","redo-undo","resize-cells","resize-handler","resizer","select","speech-recognize","spellcheck","symbols","xpath","wrap-nodes"],uploader:{url:"http://118.97.48.172:8048/?action=fileUpload",insertImageAsBase64URI:!0,imagesExtensions:[".jpg",".png",".gif"],data:{},format:"json",headers:{},prepareData:e=>e,isSuccess:e=>200===e.status,getMessage:e=>e.message,process:e=>e.files,defaultHandlerSuccess:(e,s,t,l)=>{t.getFiles().forEach(e=>{e.isImage()&&l(e)})}},filebrowser:{ajax:{url:"http://118.97.48.172:8048/"},height:580,pagination:{pageSize:20}}}),[s,g]);return a.useEffect(()=>{d(!0),x&&i(x.post_content)},[x]),(0,l.jsx)(l.Fragment,{children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V,{theme:s,isOpen:h,onClose:m,onSelectArticle:e=>{let s=p.current;if(s&&s.selection){let t='\n                <div class="p-0 px-5 pb-4 border-l-4 border-red-600 mb-4 bg-transparent clear-both">\n                    <h4 class="font-bold text-lg mb-4 text-red-600">Baca Juga :</h4>\n                    <div class="float-left">\n                        <a href="https://uzone.id/'.concat(e.post_slug,'" target="_blank">\n                            <img src="').concat(e.featured_image,'" alt="Images" title="').concat(e.label,'" class="w-30 h-20 object-cover rounded-lg">\n                        </a>\n                    </div>\n                    <div class="relative ml-40">\n                        <h5 class="font-bold text-base mt-5 underline">\n                            <a href="https://uzone.id/').concat(e.post_slug,'" target="_blank">').concat(e.label,'</a>\n                        </h5>\n                    </div>\n                    <div class="clear-both h-0"></div>\n                </div>\n                ');s.selection.restore(c),s.selection.insertHTML(t)}}}),(0,l.jsx)(k(),{value:n,config:j,onBlur:e=>{i(e),r("post_content"),t("post_content",e,{shouldValidate:!0})}})]}):(0,l.jsx)(_.$,{size:"lg",colorScheme:"red"})})}function B(e){var s;let{errors:t,control:i,theme:o,Controller:d,setValue:c,session:u,trigger:h}=e,{dataPost:g}=(0,D.k)(),[m,p]=a.useState([]),[x,j]=a.useState([]),f={control:e=>({...e,backgroundColor:"dark"===o?"#2D3748":"#fff",color:"dark"===o?"#fff":"#000"}),menu:e=>({...e,backgroundColor:"dark"===o?"#2D3748":"#fff"}),singleValue:e=>({...e,color:"dark"===o?"#fff":"#000"}),multiValue:e=>({...e,backgroundColor:"dark"===o?"#4A5568":"#E2E8F0",color:"dark"===o?"#fff":"#000"}),multiValueLabel:e=>({...e,color:"dark"===o?"#fff":"#000"})},v=async e=>{var s;let t=await (0,O.Z)("GET","".concat("http://10.177.2.133:3037/uzcms-odcdc/","api/v1/tags/"),{page:1,limit:100,search:e},{accept:"application/json",Authorization:"Bearer ".concat(null==u?void 0:null===(s=u.user)||void 0===s?void 0:s.access_token)});(null==t?void 0:t.status)===200&&p(t.data.data.tags.map(e=>({label:e.name,value:e.name})))};return a.useEffect(()=>{if(g){var e;j((null===(e=g.post_tag)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[])}},[g]),(0,l.jsxs)(r.NI,{isInvalid:!!t.post_tag,mb:4,children:[(0,l.jsx)(n.l,{children:"Tag"}),(0,l.jsx)(d,{name:"post_tag",control:i,render:e=>{let{field:s}=e;return(0,l.jsx)(F.ZP,{...s,isMulti:!0,styles:f,options:m,placeholder:"Select tags...",onChange:e=>{let s=[...x.filter(s=>!e.some(e=>e.value===s.value)),...e];j(s),c("post_tag",s,{shouldValidate:!0}),h("post_tag")},onInputChange:e=>{e&&v(e)},value:x})}}),(0,l.jsx)("p",{className:"text-sm text-red-500",children:(null===(s=t.post_tag)||void 0===s?void 0:s.message)&&"Tag is required and must be at least 1 tag."})]})}var A=t(33145),X=t(25922);function Z(e){var s,t,a,b;let{register:_,errors:y,session:k,dataCategory:S,control:I,setValue:C,Controller:w,trigger:N,isLoading:z,setIsModalMedia:P,seletectedImage:F,openFeatureImage:E}=e,{theme:O}=(0,X.F)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"col-span-2 p-4 bg-white border border-gray-200 rounded-lg shadow-sm lg:mr-3 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,l.jsxs)(r.NI,{isInvalid:!!y.post_title,mb:4,children:[(0,l.jsx)(n.l,{children:"Title"}),(0,l.jsx)(i.I,{placeholder:"Original Title",..._("post_title",{required:"Please input the title!"})})]}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_excerp,mb:4,children:[(0,l.jsx)(n.l,{children:"Article Description"}),(0,l.jsx)(o.g,{placeholder:"Summary Article",rows:4,maxLength:160,..._("post_excerp",{required:"Please input summary!"})}),(0,l.jsx)(d.xu,{fontSize:"sm",children:"* Max 160 characters"})]}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_content,mb:4,children:[(0,l.jsx)(n.l,{children:"Content"}),(0,l.jsx)(T,{trigger:N,theme:O,setValue:C}),(0,l.jsx)(c.J1,{children:(null===(s=y.post_content)||void 0===s?void 0:s.message)&&"string"==typeof y.post_content.message&&y.post_content.message})]})]}),(0,l.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[(0,l.jsxs)(r.NI,{isInvalid:!!y.post_slug,mb:4,children:[(0,l.jsx)(n.l,{children:"Slug"}),(0,l.jsx)(i.I,{readOnly:!0,placeholder:"Slug",..._("post_slug",{required:"Please input slug!"})})]}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_type,mb:4,children:[(0,l.jsx)(n.l,{children:"Type"}),(0,l.jsxs)(u.P,{..._("post_type",{required:"Please input the type!"}),children:[(0,l.jsx)("option",{value:"1",children:"Default"}),(0,l.jsx)("option",{value:"2",children:"Video"}),(0,l.jsx)("option",{value:"3",children:"Gallery"})]})]}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_category,mb:4,children:[(0,l.jsx)(n.l,{children:"Category"}),(0,l.jsx)("div",{className:"border border-gray-200 p-2 h-[250px] overflow-y-auto",children:S.length>0?(0,l.jsx)(w,{name:"post_category_id",control:I,render:e=>{let{field:s}=e;return(0,l.jsx)(h.c,{...s,colorScheme:"red",onChange:e=>{let t=S.filter(s=>e.includes(s.id.toString())),l=t.map(e=>e.name),a=t.map(e=>e.id.toString());C("post_category",l,{shouldValidate:!0}),s.onChange(a)},children:(0,l.jsx)(g.g,{align:"start",children:S.map(e=>(0,l.jsx)(m.X,{value:e.id.toString(),children:e.name},e.id))})})}}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.O,{height:3}),(0,l.jsx)(p.O,{height:3,my:2}),(0,l.jsx)(p.O,{height:3,my:2}),(0,l.jsx)(p.O,{height:3,my:2}),(0,l.jsx)(p.O,{height:3,my:2}),(0,l.jsx)(p.O,{height:3,my:2}),(0,l.jsx)(p.O,{height:3})]})}),(0,l.jsx)(c.J1,{children:(null===(t=y.post_category)||void 0===t?void 0:t.message)&&"string"==typeof y.post_category.message&&y.post_category.message})]}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_publisher,mb:4,children:[(0,l.jsx)(n.l,{children:"Publish On"}),(0,l.jsx)("div",{className:"border border-gray-200 p-2 h-[270px] overflow-y-auto",children:(0,l.jsx)(w,{name:"post_publisher",control:I,render:e=>{let{field:s}=e;return(0,l.jsx)(h.c,{...s,colorScheme:"red",onChange:e=>{C("post_category",e,{shouldValidate:!0}),s.onChange(e)},children:(0,l.jsxs)(g.g,{align:"start",children:[(0,l.jsx)(m.X,{value:"uzone",children:"Uzone"}),(0,l.jsx)(m.X,{value:"internetPositif",children:"Internet Positif"}),(0,l.jsx)(m.X,{value:"mercusuar",children:"Mercusuar"}),(0,l.jsx)(m.X,{value:"wifiID",children:"Wifi ID"}),(0,l.jsx)(m.X,{value:"internetFiltering",children:"Internet Filtering"}),(0,l.jsx)(m.X,{value:"rcti",children:"RCTI +"}),(0,l.jsx)(m.X,{value:"diarium",children:"Diarium"}),(0,l.jsx)(m.X,{value:"cazbond",children:"Cazbond"})]})})}})}),(0,l.jsx)(c.J1,{children:(null===(a=y.post_publisher)||void 0===a?void 0:a.message)&&"string"==typeof y.post_publisher.message&&y.post_publisher.message})]}),(0,l.jsx)(B,{session:k,control:I,errors:y,theme:O,Controller:w,setValue:C,trigger:N}),(0,l.jsxs)(r.NI,{isInvalid:!!y.post_status,mb:4,children:[(0,l.jsx)(n.l,{children:"Status"}),(0,l.jsx)(w,{name:"post_status",control:I,defaultValue:"draft",rules:{required:"Please select the status!"},render:e=>{let{field:s}=e;return(0,l.jsx)(x.E,{...s,colorScheme:"red",onChange:e=>{s.onChange(e),C("post_status",e)},children:(0,l.jsxs)(j.U,{spacing:"24px",children:[(0,l.jsx)(f.Y,{value:"draft",children:"Draft"}),(0,l.jsx)(f.Y,{value:"schedule",children:"Schedule"}),(0,l.jsx)(f.Y,{value:"publish",children:"Publish"})]})})}}),(0,l.jsx)(c.J1,{children:(null===(b=y.post_status)||void 0===b?void 0:b.message)&&"string"==typeof y.post_status.message&&y.post_status.message})]}),(0,l.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,l.jsx)(v.z,{className:"w-full",onClick:()=>{P(),E()},children:"Set Feature Image"}),F&&(0,l.jsx)(A.default,{src:F,className:"w-full rounded-md",alt:"featured image",width:200,height:120}),(0,l.jsx)(v.z,{colorScheme:"red",type:"submit",className:"w-full",isLoading:z,children:"Publish"})]})]})]})}},71134:function(e,s,t){t.d(s,{Z:function(){return _}});var l=t(57437),a=t(2265),r=t(19383),n=t(48860),i=t(34096),o=t(49270),d=t(27924),c=t(16152),u=t(25810),h=t(10883),g=t(20517),m=t(61273),p=t(85330),x=t(61721),j=t(25957);function f(e){let{isOpen:s,register:t,onClose:a}=e,{setIsModalMedia:u}=(0,j.G)();return(0,l.jsx)(p.h,{children:(0,l.jsxs)(r.u_,{isOpen:s,onClose:()=>{a(),u()},scrollBehavior:"inside",children:[(0,l.jsx)(n.Z,{}),(0,l.jsxs)(i.h,{width:{base:"full",md:"80%"},height:{base:"full",md:"80%"},maxWidth:"none",children:[(0,l.jsx)(o.x,{children:"Media Gallery"}),(0,l.jsx)(d.o,{}),(0,l.jsx)(c.f,{className:"",children:(0,l.jsx)(x.default,{})})]})]})})}var v=t(33145);t(98983);var b=t(33289);function _(e){let{isOpen:s,register:t,onClose:p,setValue:x}=e,{isOpenMedia:_,openMedia:y,closeMedia:k,focalPoint:S,seletectedImage:I,setSeletectedImage:C,setFocalPoint:w}=(0,j.G)();return a.useEffect(()=>{x("feature_img",I,{shouldValidate:!0})},[I,x]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.u_,{size:"xl",isOpen:s,onClose:p,scrollBehavior:"inside",children:[(0,l.jsx)(n.Z,{}),(0,l.jsxs)(i.h,{width:{base:"full",md:"70%"},height:{base:"full",md:"80%"},maxWidth:"none",children:[(0,l.jsx)(o.x,{children:"Set Feature Image"}),(0,l.jsx)(d.o,{}),(0,l.jsx)(c.f,{children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"grid grid-rows-1 lg:grid-cols-10",children:[(0,l.jsx)(u.z,{leftIcon:(0,l.jsx)(m.K7z,{}),colorScheme:"blue",variant:"outline",onClick:()=>{y(),p()},className:"col-span-2",children:"From Gallery"}),(0,l.jsx)("p",{className:"col-span-2 text-xl font-semibold text-center",children:"or From URL"}),(0,l.jsx)(h.I,{placeholder:"Input External Image URL",className:"col-span-6",value:I,...t("feature_img"),onChange:e=>C(e.target.value)})]}),(0,l.jsx)("div",{className:"grid grid-rows-1 gap-4 my-5 lg:grid-cols-5",children:I&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(b.U,{src:I,className:"!w-2/3 !h-full mx-auto",onChange:e=>{w(e)},classes:{image:"rounded-md"}}),(0,l.jsx)("p",{className:"mt-1 text-xs italic text-center",children:"drag point to adjust thumbnail"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(v.default,{src:I,className:"object-none rounded-md mx-auto w-[200px] h-[120px]",alt:"Selected",width:200,height:120,style:{objectPosition:"".concat(null==S?void 0:S.x,"% ").concat(null==S?void 0:S.y,"%")}}),(0,l.jsx)("p",{className:"mt-2 text-sm font-semibold",children:"Thumbnail"})]})]})}),(0,l.jsx)(h.I,{placeholder:"Caption Foto",...t("post_images_title",{required:!0}),my:5})]})}),(0,l.jsx)(g.m,{textAlign:"center",children:(0,l.jsx)(u.z,{mx:"auto",colorScheme:"red",onClick:p,children:"Submit"})})]})]}),(0,l.jsx)(f,{register:t,isOpen:_,onClose:k})]})}},83930:function(e,s,t){t.d(s,{k:function(){return l}});let l=(0,t(59625).Ue)()(e=>({dataPost:"",setDataPost:s=>e({dataPost:s})}))}}]);